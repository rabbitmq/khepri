<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module khepri_adv</title>
<link rel="stylesheet" type="text/css" href="edoc-extensions.css" title="EDoc">
<link rel="icon" href="khepri-favicon.svg" type="image/svg+xml">
</head>
<body class="markdown-body language-erlang"><script src="prism.js"></script>
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module khepri_adv</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Khepri database advanced API.


<h2><a name="description">Description</a></h2><p>Khepri database advanced API.</p>
 
  <p>This module exposes variants of the functions in <a docgen-rel="seeerl" docgen-href="khepri" href="khepri.html"><code>khepri</code></a> which  
return more detailed return values for advanced use cases. Here are some  
examples of what can be achieved with this module:</p>
 
  <ul>
  <li>Distinguish a tree node with the <code>undefined</code> atom as its payload, from
  a tree node with no payload, from a non-existing tree node.</li>
  <li>Know the payload version after a call to the functions based on <a docgen-rel="seemfa" docgen-href="#put/5" href="#put-5"><code>put/5</code></a> which can be useful to perform transactional operations without
  using <a docgen-rel="seemfa" docgen-href="khepri#transaction/4" href="khepri.html#transaction-4"><code>khepri:transaction/4</code></a>.</li>
  </ul>
 
  Functions provided by <a docgen-rel="seeerl" docgen-href="khepri" href="khepri.html"><code>khepri</code></a> are implemented on top of this module
  and simplify the return value for the more common use cases.
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-many_results">many_results()</a></h3>
<p><code>many_results() = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-common_ret">khepri_machine:common_ret()</a></code></p>
<p>  Return value of a query or synchronous command targeting many tree nodes.</p>

<h3 class="typedecl"><a name="type-node_props_map">node_props_map()</a></h3>
<p><code>node_props_map() = #{<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a> =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a>}</code></p>
<p>  Structure used to return a map of nodes and their associated properties,
  payload and child nodes.</p>

<h3 class="typedecl"><a name="type-single_result">single_result()</a></h3>
<p><code>single_result() = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(<a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a> | #{}) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></p>
<p>  Return value of a query or synchronous command targeting one specific tree
  node.</p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#get-1">get/1</a></td><td>Returns the properties and payload of the tree node pointed to by the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#get-2">get/2</a></td><td>Returns the properties and payload of the tree node pointed to by the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#get-3">get/3</a></td><td>Returns the properties and payload of the tree node pointed to by the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#get_many-1">get_many/1</a></td><td>Returns properties and payloads of all the tree nodes matching the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#get_many-2">get_many/2</a></td><td>Returns properties and payloads of all the tree nodes matching the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#get_many-3">get_many/3</a></td><td>Returns properties and payloads of all the tree nodes matching the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#put-2">put/2</a></td><td>Sets the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#put-3">put/3</a></td><td>Sets the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#put-4">put/4</a></td><td>Sets the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#put_many-2">put_many/2</a></td><td>Sets the payload of all the tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#put_many-3">put_many/3</a></td><td>Sets the payload of all the tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#put_many-4">put_many/4</a></td><td>Sets the payload of all the tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#create-2">create/2</a></td><td>Creates a tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#create-3">create/3</a></td><td>Creates a tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#create-4">create/4</a></td><td>Creates a tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#update-2">update/2</a></td><td>Updates an existing tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#update-3">update/3</a></td><td>Updates an existing tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#update-4">update/4</a></td><td>Updates an existing tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-3">compare_and_swap/3</a></td><td>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-4">compare_and_swap/4</a></td><td>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-5">compare_and_swap/5</a></td><td>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</td></tr>
<tr><td valign="top"><a href="#delete-1">delete/1</a></td><td>Deletes the tree node pointed to by the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete-2">delete/2</a></td><td>Deletes the tree node pointed to by the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete-3">delete/3</a></td><td>Deletes the tree node pointed to by the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many-1">delete_many/1</a></td><td>Deletes all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many-2">delete_many/2</a></td><td>Deletes all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many-3">delete_many/3</a></td><td>Deletes all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_payload-1">delete_payload/1</a></td><td>Deletes the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#delete_payload-2">delete_payload/2</a></td><td>Deletes the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#delete_payload-3">delete_payload/3</a></td><td>Deletes the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many_payloads-1">delete_many_payloads/1</a></td><td>Deletes the payload of all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many_payloads-2">delete_many_payloads/2</a></td><td>Deletes the payload of all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many_payloads-3">delete_many_payloads/3</a></td><td>Deletes the payload of all tree nodes matching the given path pattern.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="get-1">get/1</a></h3>
<div class="spec">
<p><code>get(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Returns the properties and payload of the tree node pointed to by the  
given path pattern.</p>
 
  Calling this function is the same as calling <code>get(StoreId, PathPattern)</code>
  with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#get-2">get/2</a>, <a href="#get-3">get/3</a>.</p>

<h3 class="function"><a name="get-2">get/2</a></h3>
<div class="spec">
<p><code>get(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p><p><code>get(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Returns the properties and payload of the tree node pointed to by the  
given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>get(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>get(StoreId, PathPattern, #{})</code>.</li>
  <li><code>get(PathPattern, Options)</code>. Calling it is the same as calling
  <code>get(StoreId, PathPattern, Options)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>.</p>

<h3 class="function"><a name="get-3">get/3</a></h3>
<div class="spec">
<p><code>get(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to get.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: an <code>{ok, NodeProps}</code> tuple or an <code>{error, Reason}</code> tuple.
 </p>
</div><p><p>Returns the properties and payload of the tree node pointed to by the  
given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,
  updating many nodes with the same payload is denied. That fact is checked
  before the tree node is looked up: so if a condition in the path could
  potentially match several nodes, an exception is raised, even though only
  one tree node would match at the time. If you want to get multiple nodes at
  once, use <a docgen-rel="seemfa" docgen-href="#get_many/3" href="#get_many-3"><code>get_many/3</code></a>.</p>
 
  <p>The returned <code>{ok, NodeProps}</code> tuple contains a map with the properties and
  payload (if any) of the targeted tree node. If the tree node is not found,
  <code>{error, ?khepri_error(node_not_found, Info)}</code> is returned.</p>
 
  Example: query a tree node which holds the atom <code>value</code>
  <pre><code>%% Query the tree node at `/:foo/:bar'.
{ok, #{data := value,
       payload_version := 1}} = khepri_adv:get(StoreId, [foo, bar]).</code></pre>
 
  Example: query an existing tree node with no payload
  <pre><code>%% Query the tree node at `/:no_payload'.
{ok, #{payload_version := 1}} = khepri_adv:get(StoreId, [no_payload]).</code></pre>
 
  Example: query a non-existent tree node
  <pre><code>%% Query the tree node at `/:non_existent'.
{error, ?khepri_error(node_not_found, _)} = khepri_adv:get(
                                              StoreId, [non_existent]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#get_many-3">get_many/3</a>, <a href="khepri.html#get-3">khepri:get/3</a>.</p>

<h3 class="function"><a name="get_many-1">get_many/1</a></h3>
<div class="spec">
<p><code>get_many(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
</div><p><p>Returns properties and payloads of all the tree nodes matching the  
given path pattern.</p>
 
  Calling this function is the same as calling <code>get_many(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#get_many-2">get_many/2</a>, <a href="#get_many-3">get_many/3</a>.</p>

<h3 class="function"><a name="get_many-2">get_many/2</a></h3>
<div class="spec">
<p><code>get_many(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p><p><code>get_many(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Returns properties and payloads of all the tree nodes matching the  
given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>get_many(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>get_many(StoreId, PathPattern, #{})</code>.</li>
  <li><code>get_many(PathPattern, Options)</code>. Calling it is the same as calling
  <code>get_many(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#get_many-3">get_many/3</a>.</p>

<h3 class="function"><a name="get_many-3">get_many/3</a></h3>
<div class="spec">
<p><code>get_many(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to get.<br>
<code>Options</code>: query options such as <code>favor</code>.
 <br>
</p>
<p>returns: an <code>{ok, NodePropsMap}</code> tuple or an <code>{error, Reason}</code> tuple.
 </p>
</div><p><p>Returns properties and payloads of all the tree nodes matching the  
given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The returned <code>{ok, NodePropsMap}</code> tuple contains a map where keys correspond  
to the path to a tree node matching the path pattern. Each key then points  
to a map containing the properties and payload (if any) of that matching  
tree node.</p>
 
  Example: query all nodes in the tree
  <pre><code>%% Get all nodes in the tree. The tree is:
%% &lt;root&gt;
%% `-- foo
%%     `-- bar = value
{ok, #{[foo] :=
       #{payload_version := 1},
       [foo, bar] :=
       #{data := value,
         payload_version := 1}}} = khepri_adv:get_many(
                                     StoreId,
                                     [?KHEPRI_WILDCARD_STAR_STAR]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>, <a href="khepri.html#get_many-3">khepri:get_many/3</a>.</p>

<h3 class="function"><a name="put-2">put/2</a></h3>
<div class="spec">
<p><code>put(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>put(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#put-3">put/3</a>, <a href="#put-4">put/4</a>.</p>

<h3 class="function"><a name="put-3">put/3</a></h3>
<div class="spec">
<p><code>put(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>put(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#put-4">put/4</a>.</p>

<h3 class="function"><a name="put-4">put/4</a></h3>
<div class="spec">
<p><code>put(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to create or
         modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodeProps}</code> tuple or
  an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Sets the payload of the tree node pointed to by the given path  
pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,  
updating many nodes with the same payload is denied. That fact is checked  
before the tree node is looked up: so if a condition in the path could  
potentially match several nodes, an exception is raised, even though only  
one tree node would match at the time.</p>
 
  <p>When using a simple path (i.e. without conditions), if the targeted tree  
node does not exist, it is created using the given payload. If the  
targeted tree node exists, it is updated with the given payload and its  
payload version is increased by one. Missing parent nodes are created on  
the way.</p>
 
  <p>When using a path pattern, the behavior is the same. However if a condition  
in the path pattern is not met, an error is returned and the tree structure  
is not modified.</p>
 
  <p>The returned <code>{ok, NodeProps}</code> tuple contains a map with the properties and
  payload (if any) of the targeted tree node: the payload was the one before
  the update, other properties like the payload version correspond to the
  updated node. If the targeted tree node didn't exist, <code>NodeProps</code> will be  
an empty map.</p>
 
  The payload must be one of the following form:
  <ul>
  <li>An explicit absence of payload (<a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>),
  using the marker returned by <a docgen-rel="seemfa" docgen-href="khepri_payload#none/0" href="khepri_payload.html#none-0"><code>khepri_payload:none/0</code></a>, meaning there
  will be no payload attached to the tree node and the existing payload will
  be discarded if any</li>
  <li>An anonymous function; it will be considered a stored procedure and
  will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#sproc/0" href="khepri_payload.html#type-sproc"><code>khepri_payload:sproc()</code></a> record</li>
  <li>Any other term; it will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#data/0" href="khepri_payload.html#type-data"><code>khepri_payload:data()</code></a>
  record</li>
  </ul>
 
  <p>It is possible to wrap the payload in its internal structure explicitly
  using the <a docgen-rel="seeerl" docgen-href="khepri_payload" href="khepri_payload.html"><code>khepri_payload</code></a> module directly.</p>
 
  <p>The <code>Options</code> map may specify command-level options; see <a docgen-rel="seetype" docgen-href="khepri#command_options/0" href="khepri.html#type-command_options"><code>khepri:command_options()</code></a>, <a docgen-rel="seetype" docgen-href="khepri#tree_options/0" href="khepri.html#type-tree_options"><code>khepri:tree_options()</code></a> and <a docgen-rel="seetype" docgen-href="khepri#put_options/0" href="khepri.html#type-put_options"><code>khepri:put_options()</code></a>.</p>
 
  <p>When doing an asynchronous update, the <a docgen-rel="seemfa" docgen-href="#wait_for_async_ret/1" href="#wait_for_async_ret-1"><code>wait_for_async_ret/1</code></a>  
function can be used to receive the message from Ra.</p>
 
  <p>The returned <code>{ok, NodeProps}</code> tuple contains a map with the properties and  
payload (if any) of the targeted tree node as they were before the put.</p>
 
  Example:
  <pre><code>%% Insert a tree node at `/:foo/:bar', overwriting the previous value.
{ok, #{data := value,
       payload_version := 1}} = khepri_adv:put(
                                  StoreId, [foo, bar], new_value).</code></pre>
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-5">compare_and_swap/5</a>, <a href="#create-4">create/4</a>, <a href="#update-4">update/4</a>, <a href="khepri.html#put-4">khepri:put/4</a>.</p>

<h3 class="function"><a name="put_many-2">put_many/2</a></h3>
<div class="spec">
<p><code>put_many(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of all the tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>put_many(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#put_many-3">put_many/3</a>, <a href="#put_many-4">put_many/4</a>.</p>

<h3 class="function"><a name="put_many-3">put_many/3</a></h3>
<div class="spec">
<p><code>put_many(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of all the tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>put_many(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#put_many-4">put_many/4</a>.</p>

<h3 class="function"><a name="put_many-4">put_many/4</a></h3>
<div class="spec">
<p><code>put_many(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to create or
         modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodePropsMap}</code> tuple or
  an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always <code>ok</code>
  (the actual return value may be sent by a message if a correlation ID was
  specified).
 </p>
</div><p><p>Sets the payload of all the tree nodes matching the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>When using a simple path (i.e. without conditions), if the targeted tree  
node does not exist, it is created using the given payload. If the  
targeted tree node exists, it is updated with the given payload and its  
payload version is increased by one. Missing parent nodes are created on  
the way.</p>
 
  <p>When using a path pattern, the behavior is the same. However if a condition  
in the path pattern is not met, an error is returned and the tree structure  
is not modified.</p>
 
  <p>The returned <code>{ok, NodePropsMap}</code> tuple contains a map where keys  
correspond to the path to a tree node matching the path pattern. Each key  
then points to a map containing the properties and payload (if any) of the  
targeted tree node: the payload was the one before the update, other  
properties like the payload version correspond to the updated node.</p>
 
  The payload must be one of the following form:
  <ul>
  <li>An explicit absence of payload (<a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>),
  using the marker returned by <a docgen-rel="seemfa" docgen-href="khepri_payload#none/0" href="khepri_payload.html#none-0"><code>khepri_payload:none/0</code></a>, meaning there
  will be no payload attached to the tree node and the existing payload will
  be discarded if any</li>
  <li>An anonymous function; it will be considered a stored procedure and
  will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#sproc/0" href="khepri_payload.html#type-sproc"><code>khepri_payload:sproc()</code></a> record</li>
  <li>Any other term; it will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#data/0" href="khepri_payload.html#type-data"><code>khepri_payload:data()</code></a>
  record</li>
  </ul>
 
  <p>It is possible to wrap the payload in its internal structure explicitly
  using the <a docgen-rel="seeerl" docgen-href="khepri_payload" href="khepri_payload.html"><code>khepri_payload</code></a> module directly.</p>
 
  <p>The <code>Options</code> map may specify command-level options; see <a docgen-rel="seetype" docgen-href="khepri#command_options/0" href="khepri.html#type-command_options"><code>khepri:command_options()</code></a>, <a docgen-rel="seetype" docgen-href="khepri#tree_options/0" href="khepri.html#type-tree_options"><code>khepri:tree_options()</code></a> and <a docgen-rel="seetype" docgen-href="khepri#put_options/0" href="khepri.html#type-put_options"><code>khepri:put_options()</code></a>.</p>
 
  <p>When doing an asynchronous update, the <a docgen-rel="seemfa" docgen-href="#wait_for_async_ret/1" href="#wait_for_async_ret-1"><code>wait_for_async_ret/1</code></a>  
function can be used to receive the message from Ra.</p>
 
  Example:
  <pre><code>%% Set value of all tree nodes matching `/*/:bar', to `new_value'.
{ok, #{[foo, bar] :=
       #{data := value,
         payload_version := 1},
       [baz, bar] :=
       #{payload_version := 1}}} = khepri_adv:put_many(
                                     StoreId,
                                     [?KHEPRI_WILDCARD_STAR, bar],
                                     new_value).</code></pre>
 </p>
<p><b>See also:</b> <a href="#put-4">put/4</a>, <a href="khepri.html#put_many-4">khepri:put_many/4</a>.</p>

<h3 class="function"><a name="create-2">create/2</a></h3>
<div class="spec">
<p><code>create(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Creates a tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>create(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#create-3">create/3</a>, <a href="#create-4">create/4</a>.</p>

<h3 class="function"><a name="create-3">create/3</a></h3>
<div class="spec">
<p><code>create(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Creates a tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>create(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#create-4">create/4</a>.</p>

<h3 class="function"><a name="create-4">create/4</a></h3>
<div class="spec">
<p><code>create(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to create.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodeProps}</code> tuple or
  an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Creates a tree node with the given payload.</p>
 
  <p>The behavior is the same as <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a> except that if the tree node
  already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple  
is returned.</p>
 
  Internally, the <code>PathPattern</code> is modified to include an
  <code>#if_node_exists{exists = false}</code> condition on its last component.
 </p>
<p><b>See also:</b> <a href="#put-4">put/4</a>, <a href="#update-4">update/4</a>, <a href="khepri.html#create-4">khepri:create/4</a>.</p>

<h3 class="function"><a name="update-2">update/2</a></h3>
<div class="spec">
<p><code>update(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>update(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#update-3">update/3</a>, <a href="#update-4">update/4</a>.</p>

<h3 class="function"><a name="update-3">update/3</a></h3>
<div class="spec">
<p><code>update(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>update(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#update-4">update/4</a>.</p>

<h3 class="function"><a name="update-4">update/4</a></h3>
<div class="spec">
<p><code>update(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodeProps}</code> tuple or
  an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Updates an existing tree node with the given payload.</p>
 
  <p>The behavior is the same as <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a> except that if the tree node
  already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple  
is returned.</p>
 
  Internally, the <code>PathPattern</code> is modified to include an
  <code>#if_node_exists{exists = true}</code> condition on its last component.
 </p>
<p><b>See also:</b> <a href="#create-4">create/4</a>, <a href="#put-4">put/4</a>, <a href="khepri.html#update-4">khepri:update/4</a>.</p>

<h3 class="function"><a name="compare_and_swap-3">compare_and_swap/3</a></h3>
<div class="spec">
<p><code>compare_and_swap(PathPattern, DataPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</p>
 
  Calling this function is the same as calling <code>compare_and_swap(StoreId,
  PathPattern, DataPattern, Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-4">compare_and_swap/4</a>, <a href="#compare_and_swap-5">compare_and_swap/5</a>.</p>

<h3 class="function"><a name="compare_and_swap-4">compare_and_swap/4</a></h3>
<div class="spec">
<p><code>compare_and_swap(StoreId, PathPattern, DataPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</p>
 
  Calling this function is the same as calling <code>compare_and_swap(StoreId,
  PathPattern, DataPattern, Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-5">compare_and_swap/5</a>.</p>

<h3 class="function"><a name="compare_and_swap-5">compare_and_swap/5</a></h3>
<div class="spec">
<p><code>compare_and_swap(StoreId, PathPattern, DataPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodeProps}</code> tuple or
  an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</p>
 
  <p>The behavior is the same as <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a> except that if the tree node
  already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple  
is returned.</p>
 
  Internally, the <code>PathPattern</code> is modified to include an
  <code>#if_data_matches{pattern = DataPattern}</code> condition on its last component.
 </p>
<p><b>See also:</b> <a href="#put-4">put/4</a>, <a href="khepri.html#compare_and_swap-5">khepri:compare_and_swap/5</a>.</p>

<h3 class="function"><a name="delete-1">delete/1</a></h3>
<div class="spec">
<p><code>delete(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the tree node pointed to by the given path pattern.</p>
 
  Calling this function is the same as calling <code>delete(StoreId, PathPattern)</code>
  with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#delete-2">delete/2</a>, <a href="#delete-3">delete/3</a>.</p>

<h3 class="function"><a name="delete-2">delete/2</a></h3>
<div class="spec">
<p><code>delete(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p><p><code>delete(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Deletes the tree node pointed to by the given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>delete(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, #{})</code>.</li>
  <li><code>delete(PathPattern, Options)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#delete-3">delete/3</a>.</p>

<h3 class="function"><a name="delete-3">delete/3</a></h3>
<div class="spec">
<p><code>delete(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the nodes to delete.<br>
<code>Options</code>: command options such as the command type.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodeProps}</code> tuple or
  an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Deletes the tree node pointed to by the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,
  updating many nodes with the same payload is denied. That fact is checked
  before the tree node is looked up: so if a condition in the path could
  potentially match several nodes, an exception is raised, even though only
  one tree node would match at the time. If you want to delete multiple nodes
  at once, use <a docgen-rel="seemfa" docgen-href="#delete_many/3" href="#delete_many-3"><code>delete_many/3</code></a>.</p>
 
  <p>The returned <code>{ok, NodeProps}</code> tuple contains a map with the properties and
  payload (if any) of the targeted tree node as they were before the delete.
  If the targeted tree node didn't exist, <code>NodeProps</code> will be an empty map.</p>
 
  <p>When doing an asynchronous update, the <a docgen-rel="seemfa" docgen-href="#wait_for_async_ret/1" href="#wait_for_async_ret-1"><code>wait_for_async_ret/1</code></a>  
function can be used to receive the message from Ra.</p>
 
  Example:
  <pre><code>%% Delete the tree node at `/:foo/:bar'.
{ok, #{data := value,
       payload_version := 1}} = khepri_adv:delete(StoreId, [foo, bar]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#delete_many-3">delete_many/3</a>, <a href="khepri.html#delete-3">khepri:delete/3</a>.</p>

<h3 class="function"><a name="delete_many-1">delete_many/1</a></h3>
<div class="spec">
<p><code>delete_many(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes all tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>delete_many(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#delete_many-2">delete_many/2</a>, <a href="#delete_many-3">delete_many/3</a>.</p>

<h3 class="function"><a name="delete_many-2">delete_many/2</a></h3>
<div class="spec">
<p><code>delete_many(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p><p><code>delete_many(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Deletes all tree nodes matching the given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>delete_many(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, #{})</code>.</li>
  <li><code>delete_many(PathPattern, Options)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#delete_many-3">delete_many/3</a>.</p>

<h3 class="function"><a name="delete_many-3">delete_many/3</a></h3>
<div class="spec">
<p><code>delete_many(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the nodes to delete.<br>
<code>Options</code>: command options such as the command type.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodePropsMap}</code> tuple
  or an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Deletes all tree nodes matching the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The returned <code>{ok, NodePropsMap}</code> tuple contains a map where keys  
correspond to the path to a deleted tree node. Each key then points to a  
map containing the properties and payload (if any) of that deleted tree  
node as they were before the delete.</p>
 
  <p>When doing an asynchronous update, the <a docgen-rel="seemfa" docgen-href="#wait_for_async_ret/1" href="#wait_for_async_ret-1"><code>wait_for_async_ret/1</code></a>  
function can be used to receive the message from Ra.</p>
 
  Example:
  <pre><code>%% Delete the tree node at `/:foo/:bar'.
{ok, #{[foo, bar] := #{data := value,
                       payload_version := 1},
       [baz, bar] := #{payload_version := 1}}} = khepri_adv:delete_many(
                                                   StoreId, [foo, bar]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#delete-3">delete/3</a>, <a href="khepri.html#delete-3">khepri:delete/3</a>.</p>

<h3 class="function"><a name="delete_payload-1">delete_payload/1</a></h3>
<div class="spec">
<p><code>delete_payload(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>delete_payload(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#delete_payload-2">delete_payload/2</a>, <a href="#delete_payload-3">delete_payload/3</a>.</p>

<h3 class="function"><a name="delete_payload-2">delete_payload/2</a></h3>
<div class="spec">
<p><code>delete_payload(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>delete_payload(StoreId,
  PathPattern, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#delete_payload-3">delete_payload/3</a>.</p>

<h3 class="function"><a name="delete_payload-3">delete_payload/3</a></h3>
<div class="spec">
<p><code>delete_payload(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to modify.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodeProps}</code> tuple or
  an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Deletes the payload of the tree node pointed to by the given path  
pattern.</p>
 
  In other words, the payload is set to <a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>.
  Otherwise, the behavior is that of <a docgen-rel="seemfa" docgen-href="#update/4" href="#update-4"><code>update/4</code></a>.
 </p>
<p><b>See also:</b> <a href="#update-4">update/4</a>, <a href="khepri.html#delete_payload-3">khepri:delete_payload/3</a>.</p>

<h3 class="function"><a name="delete_many_payloads-1">delete_many_payloads/1</a></h3>
<div class="spec">
<p><code>delete_many_payloads(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of all tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>delete_many_payloads(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#delete_many_payloads-2">delete_many_payloads/2</a>, <a href="#delete_many_payloads-3">delete_many_payloads/3</a>.</p>

<h3 class="function"><a name="delete_many_payloads-2">delete_many_payloads/2</a></h3>
<div class="spec">
<p><code>delete_many_payloads(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of all tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>delete_many_payloads(StoreId,
  PathPattern, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#delete_many_payloads-3">delete_many_payloads/3</a>.</p>

<h3 class="function"><a name="delete_many_payloads-3">delete_many_payloads/3</a></h3>
<div class="spec">
<p><code>delete_many_payloads(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to modify.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, an <code>{ok, NodePropsMap}</code> tuple
  or an <code>{error, Reason}</code> tuple; in the case of an asynchronous call, always
  <code>ok</code> (the actual return value may be sent by a message if a correlation ID
  was specified).
 </p>
</div><p><p>Deletes the payload of all tree nodes matching the given path pattern.</p>
 
  In other words, the payload is set to <a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>.
  Otherwise, the behavior is that of <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a>.
 </p>
<p><b>See also:</b> <a href="#delete_many-3">delete_many/3</a>, <a href="#put-4">put/4</a>, <a href="khepri.html#delete_many_payloads-3">khepri:delete_many_payloads/3</a>.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
