<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module khepri_tx</title>
<link rel="stylesheet" type="text/css" href="github-markdown.css" title="EDoc">
<link href="prism.css" rel="stylesheet" /><style>
    body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }
    @media (max-width: 767px) {
      body {
        padding: 15px;
      }
    }
    /* Don't apply the table style to the top-level navigation bar. */
    .navbar table {
      display: table;
      width: 100%;
    }
    .navbar table tr,
    .navbar table th,
    .navbar table td {
      border: 0;
    }
    /* Keep the same font side inside code blocks than everywhere else. */
    .markdown-body pre code,
    code[class*="language-"] {
      font-size: 85%;
    }
    /* Force the color for link on code blocks used for @see tags.  */
    .markdown-body a code,
    .markdown-body a code span.token {
      color: var(--color-accent-fg);
    }
    /* Copy the style of code blocks. */
    .markdown-body .spec {
      background: #f5f2f0;
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
      border-radius: 6px;
    }
    /* Improve margins inside function spec blocks so that:
        - empty paragraphs don't add useless margins
        - the final top and bottom margins are equal */
    .markdown-body .spec p,
    .markdown-body .spec ul {
      margin-top: 16px;
      margin-bottom: 0;
    }
    .markdown-body .spec p:first-child,
    .markdown-body .spec p:empty {
      margin-top: 0;
    }
    /* Put the function prototype in bold characters. */
    .markdown-body .spec > p > code:first-child {
      font-weight: bold;
    }
    /* Add some margin below the module short description between the table
       of contents in the Description section. This text isn't in a
       <p></p>. */
    .index + p {
      margin-top: 16px;
    }
    </style></head>
<body class="markdown-body language-erlang"><script src="prism.js"></script>
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module khepri_tx</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Khepri API for transactional queries and updates.


<h2><a name="description">Description</a></h2><p>Khepri API for transactional queries and updates.</p>
 
  <p>Transactions are anonymous functions which take no arguments, much like  
what Mnesia supports. However, unlike with Mnesia, transaction functions in  
Khepri are restricted:</p>
 
  <ul>
  <li>Calls to BIFs and other functions is limited to a set of whitelisted
  APIs. See <a docgen-rel="seemfa" docgen-href="#is_remote_call_valid/3" href="#is_remote_call_valid-3"><code>is_remote_call_valid/3</code></a> for the complete list.</li>
  <li>Sending or receiving messages is denied.</li>
  </ul>
 
  <p>The reason is that the transaction function must always have the exact same  
outcome given its inputs. Indeed, the transaction function is executed on  
every Ra cluster members participating in the consensus. The function must  
therefore modify the Khepri state (the database) identically on all Ra  
members. This is also true for Ra members joining the cluster later or  
catching up after a network partition.</p>
 
  To achieve that:
  <ol>
  <li>The code of the transaction function is extracted from the its initial
  Erlang module. This way, the transaction function does not depend on the
  initial module availability and is not affected by a module reload. See
  <a docgen-rel="seeerl" docgen-href="khepri_fun" href="khepri_fun.html"><code>khepri_fun</code></a>)</li>
  <li>The code is verified to make sure it does not perform any denied
  operations.</li>
  <li>The extracted transaction function is stored as a Khepri state machine
  command in the Ra journal to be replicated on all Ra members.</li>
  </ol>
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-tx_abort">tx_abort()</a></h3>
<p><code>tx_abort() = {aborted, any()}</code></p>


<h3 class="typedecl"><a name="type-tx_fun">tx_fun()</a></h3>
<p><code>tx_fun() = fun(() -&gt; <a href="#type-tx_fun_result">tx_fun_result()</a>)</code></p>


<h3 class="typedecl"><a name="type-tx_fun_bindings">tx_fun_bindings()</a></h3>
<p><code>tx_fun_bindings() = #{Name::atom() =&gt; Value::any()}</code></p>


<h3 class="typedecl"><a name="type-tx_fun_result">tx_fun_result()</a></h3>
<p><code>tx_fun_result() = any() | no_return()</code></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#put-2">put/2</a></td><td>Creates or modifies a specific tree node in the tree structure.</td></tr>
<tr><td valign="top"><a href="#put-3">put/3</a></td><td>Creates or modifies a specific tree node in the tree structure.</td></tr>
<tr><td valign="top"><a href="#create-2">create/2</a></td><td>Creates a specific tree node in the tree structure only if it does not
  exist.</td></tr>
<tr><td valign="top"><a href="#create-3">create/3</a></td><td>Creates a specific tree node in the tree structure only if it does not
  exist.</td></tr>
<tr><td valign="top"><a href="#update-2">update/2</a></td><td>Updates a specific tree node in the tree structure only if it already
  exists.</td></tr>
<tr><td valign="top"><a href="#update-3">update/3</a></td><td>Updates a specific tree node in the tree structure only if it already
  exists.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-3">compare_and_swap/3</a></td><td>Updates a specific tree node in the tree structure only if it already
  exists and its data matches the given <code>DataPattern</code>.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-4">compare_and_swap/4</a></td><td>Updates a specific tree node in the tree structure only if it already
  exists and its data matches the given <code>DataPattern</code>.</td></tr>
<tr><td valign="top"><a href="#clear_payload-1">clear_payload/1</a></td><td>Clears the payload of a specific tree node in the tree structure.</td></tr>
<tr><td valign="top"><a href="#clear_payload-2">clear_payload/2</a></td><td>Clears the payload of a specific tree node in the tree structure.</td></tr>
<tr><td valign="top"><a href="#delete-1">delete/1</a></td><td>Deletes all tree nodes matching the path pattern.</td></tr>
<tr><td valign="top"><a href="#exists-1">exists/1</a></td><td>Returns <code>true</code> if the tree node pointed to by the given path exists,
  otherwise <code>false</code>.</td></tr>
<tr><td valign="top"><a href="#exists-2">exists/2</a></td><td>Returns <code>true</code> if the tree node pointed to by the given path exists,
  otherwise <code>false</code>.</td></tr>
<tr><td valign="top"><a href="#get-1">get/1</a></td><td>Returns all tree nodes matching the path pattern.</td></tr>
<tr><td valign="top"><a href="#get-2">get/2</a></td><td>Returns all tree nodes matching the path pattern.</td></tr>
<tr><td valign="top"><a href="#get_node_props-1">get_node_props/1</a></td><td>Returns the tree node properties associated with the given node path.</td></tr>
<tr><td valign="top"><a href="#get_node_props-2">get_node_props/2</a></td><td>Returns the tree node properties associated with the given node path.</td></tr>
<tr><td valign="top"><a href="#has_data-1">has_data/1</a></td><td>Returns <code>true</code> if the tree node pointed to by the given path has data,
  otherwise <code>false</code>.</td></tr>
<tr><td valign="top"><a href="#get_data-1">get_data/1</a></td><td>Returns the data associated with the given node path.</td></tr>
<tr><td valign="top"><a href="#get_data-2">get_data/2</a></td><td>Returns the data associated with the given node path.</td></tr>
<tr><td valign="top"><a href="#get_data_or-2">get_data_or/2</a></td><td>Returns the data associated with the given node path, or <code>Default</code> if
  there is no data.</td></tr>
<tr><td valign="top"><a href="#get_data_or-3">get_data_or/3</a></td><td>Returns the data associated with the given node path, or <code>Default</code> if
  there is no data.</td></tr>
<tr><td valign="top"><a href="#list-1">list/1</a></td><td>Returns all direct child nodes under the given path.</td></tr>
<tr><td valign="top"><a href="#list-2">list/2</a></td><td>Returns all direct child nodes under the given path.</td></tr>
<tr><td valign="top"><a href="#find-2">find/2</a></td><td>Returns all tree nodes matching the path pattern.</td></tr>
<tr><td valign="top"><a href="#find-3">find/3</a></td><td>Finds tree nodes under <code>PathPattern</code> which match the given <code>Condition</code>.</td></tr>
<tr><td valign="top"><a href="#abort-1">abort/1</a></td><td>Aborts the transaction.</td></tr>
<tr><td valign="top"><a href="#is_transaction-0">is_transaction/0</a></td><td>Indicates if the calling function runs in the context of a transaction
  function.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="put-2">put/2</a></h3>
<div class="spec">
<p><code>put(PathPattern, Data) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Creates or modifies a specific tree node in the tree structure.</p>

<h3 class="function"><a name="put-3">put/3</a></h3>
<div class="spec">
<p><code>put(PathPattern, Data, Extra) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Extra = #{keep_while =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri_condition.html#type-keep_while">khepri_condition:keep_while()</a>}</code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Creates or modifies a specific tree node in the tree structure.</p>

<h3 class="function"><a name="create-2">create/2</a></h3>
<div class="spec">
<p><code>create(PathPattern, Data) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Creates a specific tree node in the tree structure only if it does not
  exist.</p>

<h3 class="function"><a name="create-3">create/3</a></h3>
<div class="spec">
<p><code>create(PathPattern, Data, Extra) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Extra = #{keep_while =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri_condition.html#type-keep_while">khepri_condition:keep_while()</a>}</code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Creates a specific tree node in the tree structure only if it does not
  exist.</p>

<h3 class="function"><a name="update-2">update/2</a></h3>
<div class="spec">
<p><code>update(PathPattern, Data) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Updates a specific tree node in the tree structure only if it already
  exists.</p>

<h3 class="function"><a name="update-3">update/3</a></h3>
<div class="spec">
<p><code>update(PathPattern, Data, Extra) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Extra = #{keep_while =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri_condition.html#type-keep_while">khepri_condition:keep_while()</a>}</code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Updates a specific tree node in the tree structure only if it already
  exists.</p>

<h3 class="function"><a name="compare_and_swap-3">compare_and_swap/3</a></h3>
<div class="spec">
<p><code>compare_and_swap(PathPattern, DataPattern, Data) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Updates a specific tree node in the tree structure only if it already
  exists and its data matches the given <code>DataPattern</code>.</p>

<h3 class="function"><a name="compare_and_swap-4">compare_and_swap/4</a></h3>
<div class="spec">
<p><code>compare_and_swap(PathPattern, DataPattern, Data, Extra) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Extra = #{keep_while =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri_condition.html#type-keep_while">khepri_condition:keep_while()</a>}</code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Updates a specific tree node in the tree structure only if it already
  exists and its data matches the given <code>DataPattern</code>.</p>

<h3 class="function"><a name="clear_payload-1">clear_payload/1</a></h3>
<div class="spec">
<p><code>clear_payload(PathPattern) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Clears the payload of a specific tree node in the tree structure.</p>

<h3 class="function"><a name="clear_payload-2">clear_payload/2</a></h3>
<div class="spec">
<p><code>clear_payload(PathPattern, Extra) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Extra = #{keep_while =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri_condition.html#type-keep_while">khepri_condition:keep_while()</a>}</code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Clears the payload of a specific tree node in the tree structure.</p>

<h3 class="function"><a name="delete-1">delete/1</a></h3>
<div class="spec">
<p><code>delete(PathPattern) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Deletes all tree nodes matching the path pattern.</p>

<h3 class="function"><a name="exists-1">exists/1</a></h3>
<div class="spec">
<p><code>exists(PathPattern) -&gt; Exists</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Exists = boolean()</code></li></ul></p>
<p></p>
</div><p>Returns <code>true</code> if the tree node pointed to by the given path exists,
  otherwise <code>false</code>.</p>

<h3 class="function"><a name="exists-2">exists/2</a></h3>
<div class="spec">
<p><code>exists(PathPattern, Options) -&gt; Exists</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Exists = boolean()</code></li></ul></p>
<p></p>
</div><p>Returns <code>true</code> if the tree node pointed to by the given path exists,
  otherwise <code>false</code>.</p>

<h3 class="function"><a name="get-1">get/1</a></h3>
<div class="spec">
<p><code>get(PathPattern) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Returns all tree nodes matching the path pattern.</p>

<h3 class="function"><a name="get-2">get/2</a></h3>
<div class="spec">
<p><code>get(PathPattern, Options) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Returns all tree nodes matching the path pattern.</p>

<h3 class="function"><a name="get_node_props-1">get_node_props/1</a></h3>
<div class="spec">
<p><code>get_node_props(PathPattern) -&gt; NodeProps</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>NodeProps = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a></code></li></ul></p>
<p></p>
</div><p>Returns the tree node properties associated with the given node path.</p>

<h3 class="function"><a name="get_node_props-2">get_node_props/2</a></h3>
<div class="spec">
<p><code>get_node_props(PathPattern, Options) -&gt; NodeProps</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>NodeProps = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a></code></li></ul></p>
<p></p>
</div><p>Returns the tree node properties associated with the given node path.</p>

<h3 class="function"><a name="has_data-1">has_data/1</a></h3>
<div class="spec">
<p><code>has_data(PathPattern) -&gt; HasData</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>HasData = boolean()</code></li></ul></p>
<p></p>
</div><p>Returns <code>true</code> if the tree node pointed to by the given path has data,
  otherwise <code>false</code>.</p>

<h3 class="function"><a name="get_data-1">get_data/1</a></h3>
<div class="spec">
<p><code>get_data(PathPattern) -&gt; Data</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li></ul></p>
<p></p>
</div><p>Returns the data associated with the given node path.</p>

<h3 class="function"><a name="get_data-2">get_data/2</a></h3>
<div class="spec">
<p><code>get_data(PathPattern, Options) -&gt; Data</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li></ul></p>
<p></p>
</div><p>Returns the data associated with the given node path.</p>

<h3 class="function"><a name="get_data_or-2">get_data_or/2</a></h3>
<div class="spec">
<p><code>get_data_or(PathPattern, Default) -&gt; Data</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li></ul></p>
<p></p>
</div><p>Returns the data associated with the given node path, or <code>Default</code> if
  there is no data.</p>

<h3 class="function"><a name="get_data_or-3">get_data_or/3</a></h3>
<div class="spec">
<p><code>get_data_or(PathPattern, Default, Options) -&gt; Data</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li></ul></p>
<p></p>
</div><p>Returns the data associated with the given node path, or <code>Default</code> if
  there is no data.</p>

<h3 class="function"><a name="list-1">list/1</a></h3>
<div class="spec">
<p><code>list(PathPattern) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Returns all direct child nodes under the given path.</p>

<h3 class="function"><a name="list-2">list/2</a></h3>
<div class="spec">
<p><code>list(PathPattern, Options) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Returns all direct child nodes under the given path.</p>

<h3 class="function"><a name="find-2">find/2</a></h3>
<div class="spec">
<p><code>find(PathPattern, Condition) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Condition = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern_component">khepri_path:pattern_component()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Returns all tree nodes matching the path pattern.</p>

<h3 class="function"><a name="find-3">find/3</a></h3>
<div class="spec">
<p><code>find(PathPattern, Condition, Options) -&gt; Result</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Condition = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern_component">khepri_path:pattern_component()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Result = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-result">khepri:result()</a></code></li></ul></p>
<p></p>
</div><p>Finds tree nodes under <code>PathPattern</code> which match the given <code>Condition</code>.</p>

<h3 class="function"><a name="abort-1">abort/1</a></h3>
<div class="spec">
<p><code>abort(Reason) -&gt; no_return()</code>
<ul class="definitions"><li><code>Reason = any()</code></li></ul></p>
<p><code>Reason</code>: term to return to caller of the transaction.<br>
</p>
</div><p><p>Aborts the transaction.</p>
 
  <p>Any changes so far are not committed to the store.</p>
 
  <a docgen-rel="seemfa" docgen-href="khepri#transaction/1" href="khepri.html#transaction-1"><code>khepri:transaction/1</code></a> and friends will return <code>{atomic, Reason}</code>.
 </p>

<h3 class="function"><a name="is_transaction-0">is_transaction/0</a></h3>
<div class="spec">
<p><code>is_transaction() -&gt; boolean()</code><br></p>
<p></p>
<p>returns: <code>true</code> if the calling code runs inside a transaction function,
  <code>false</code> otherwise.</p>
</div><p>Indicates if the calling function runs in the context of a transaction
  function.
 </p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
