<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module khepri</title>
<link rel="stylesheet" type="text/css" href="edoc-extensions.css" title="EDoc">
<link rel="icon" href="khepri-favicon.svg" type="image/svg+xml">
</head>
<body class="markdown-body language-erlang"><script src="prism.js"></script>
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module khepri</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Khepri database API.


<h2><a name="description">Description</a></h2><p>Khepri database API.</p>
 
  <p>This module exposes the database API to manipulate data.</p>
 
  <p>The API is mainly made of the functions used to perform simple direct atomic
  operations and queries on the database: <a docgen-rel="seemfa" docgen-href="#get/1" href="#get-1"><code>get/1</code></a>, <a docgen-rel="seemfa" docgen-href="#put/2" href="#put-2"><code>put/2</code></a>, <a docgen-rel="seemfa" docgen-href="#delete/1" href="#delete-1"><code>delete/1</code></a> and so on. In addition to that, <a docgen-rel="seemfa" docgen-href="#transaction/1" href="#transaction-1"><code>transaction/1</code></a> is the
  starting point to run transaction functions. However the API to use inside
  transaction functions is provided by <a docgen-rel="seeerl" docgen-href="khepri_tx" href="khepri_tx.html"><code>khepri_tx</code></a>.</p>
 
  <p>Functions in this module have simplified return values to cover most
  frequent use cases. If you need more details about the queried or modified
  tree nodes, like the ability to distinguish a non-existent tree node from a
  tree node with no payload, you can use the <a docgen-rel="seeerl" docgen-href="khepri_adv" href="khepri_adv.html"><code>khepri_adv</code></a> module.</p>
 
  <p>This module also provides functions to start and stop a simple unclustered
  Khepri store. For more advanced setup and clustering, see <a docgen-rel="seeerl" docgen-href="khepri_cluster" href="khepri_cluster.html"><code>khepri_cluster</code></a>.</p>
 
  <h3><a name="A_Khepri_store">A Khepri store</a></h3>
 
  <p>A Khepri store is one instance of Khepri running inside a Ra cluster (which  
could be made of a single Erlang node). It is possible to run multiple  
Khepri stores in parallel by creating multiple Ra clusters.</p>
 
  <p>A Khepri store is started and configured with <a docgen-rel="seemfa" docgen-href="#start/0" href="#start-0"><code>start/0</code></a>, <a docgen-rel="seemfa" docgen-href="#start/1" href="#start-1"><code>start/1</code></a> or <a docgen-rel="seemfa" docgen-href="#start/3" href="#start-3"><code>start/3</code></a>. To setup a cluster, see <a docgen-rel="seeerl" docgen-href="khepri_cluster" href="khepri_cluster.html"><code>khepri_cluster</code></a>.</p>
 
  <p>When a store is started, a store ID <a docgen-rel="seetype" docgen-href="#store_id/0" href="#type-store_id"><code>store_id()</code></a> is returned. This  
store ID is then used by the rest of this module's API. The returned store  
ID currently corresponds exactly to the Ra cluster name. It must be an atom  
though; other types are unsupported.</p>
 
  <h3><a name="Interacting_with_the_Khepri_store">Interacting with the Khepri store</a></h3>
 
  The API provides two ways to interact with a Khepri store:
  <ul>
  <li>Direct atomic function for simple operations</li>
  <li>Transactions for more complex operations</li>
  </ul>
 
  Simple operations are calls like:
  <ul>
  <li>Queries: <a docgen-rel="seemfa" docgen-href="#get/1" href="#get-1"><code>get/1</code></a>, <a docgen-rel="seemfa" docgen-href="#exists/1" href="#exists-1"><code>exists/1</code></a>, <a docgen-rel="seemfa" docgen-href="#has_data/1" href="#has_data-1"><code>has_data/1</code></a>, etc.</li>
  <li>Updates: <a docgen-rel="seemfa" docgen-href="#put/2" href="#put-2"><code>put/2</code></a>, <a docgen-rel="seemfa" docgen-href="#delete/1" href="#delete-1"><code>delete/1</code></a>, etc.</li>
  </ul>
 
  Transactions are like Mnesia ones. The caller passes an anonymous function
  to <a docgen-rel="seemfa" docgen-href="#transaction/1" href="#transaction-1"><code>transaction/1</code></a>, etc.:
  <pre><code>khepri:transaction(
  fun() -&gt;
      khepri_tx:put(Path, Value)
  end).</code></pre>
 
  Simple operations are more efficient than transactions, but transactions are
  more flexible.
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-async_option">async_option()</a></h3>
<p><code>async_option() = boolean() | <a href="/home/runner/work/khepri/ra/doc/ra_server.html#type-command_correlation">ra_server:command_correlation()</a> | <a href="/home/runner/work/khepri/ra/doc/ra_server.html#type-command_priority">ra_server:command_priority()</a> | {<a href="/home/runner/work/khepri/ra/doc/ra_server.html#type-command_correlation">ra_server:command_correlation()</a>, <a href="/home/runner/work/khepri/ra/doc/ra_server.html#type-command_priority">ra_server:command_priority()</a>}</code></p>
<p><p>  Option to indicate if the command should be synchronous or asynchronous.</p>
 
  Values are:
  <ul>
  <li><code>true</code> to perform an asynchronous low-priority command without a
  correlation ID.</li>
  <li><code>false</code> to perform a synchronous command.</li>
  <li>A correlation ID to perform an asynchronous low-priority command with
  that correlation ID.</li>
  <li>A priority to perform an asynchronous command with the specified
  priority but without a correlation ID.</li>
  <li>A combination of a correlation ID and a priority to perform an
  asynchronous command with the specified parameters.</li>
  </ul></p>

<h3 class="typedecl"><a name="type-child_list_length">child_list_length()</a></h3>
<p><code>child_list_length() = non_neg_integer()</code></p>
<p>  Number of direct child nodes under a tree node.</p>

<h3 class="typedecl"><a name="type-child_list_version">child_list_version()</a></h3>
<p><code>child_list_version() = pos_integer()</code></p>
<p><p>  Number of changes made to the list of child nodes of a tree node (child  
nodes added or removed).</p>
 
  The child list version starts at 1 when a tree node is created. It is
  increased by 1 each time a child is added or removed. Changes made to
  existing nodes are not reflected in this version.</p>

<h3 class="typedecl"><a name="type-command_options">command_options()</a></h3>
<p><code>command_options() = #{timeout =&gt; timeout(), async =&gt; <a href="#type-async_option">async_option()</a>, reply_from =&gt; <a href="#type-reply_from_option">reply_from_option()</a>}</code></p>
<p><p>  Options used in commands.</p>
 
  <p>Commands are <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a>, <a docgen-rel="seemfa" docgen-href="#delete/3" href="#delete-3"><code>delete/3</code></a> and read-write <a docgen-rel="seemfa" docgen-href="#transaction/4" href="#transaction-4"><code>transaction/4</code></a>.</p>
 
  <ul>
  <li><code>timeout</code> is passed to Ra command processing function.</li>
  <li><code>async</code> indicates the synchronous or asynchronous nature of the
  command; see <a docgen-rel="seetype" docgen-href="#async_option/0" href="#type-async_option"><code>async_option()</code></a>.</li>
  <li><code>reply_from</code> indicates which cluster member should reply to the
  command request; see <a docgen-rel="seetype" docgen-href="#reply_from_option/0" href="#type-reply_from_option"><code>reply_from_option()</code></a>.</li>
  </ul></p>

<h3 class="typedecl"><a name="type-data">data()</a></h3>
<p><code>data() = any()</code></p>
<p>  Data stored in a tree node's payload.</p>

<h3 class="typedecl"><a name="type-error">error()</a></h3>
<p><code>error() = <a href="#type-error">error</a>(any())</code></p>
<p>  The error tuple returned by a function after a failure.</p>

<h3 class="typedecl"><a name="type-error">error()</a></h3>
<p><code>error(Type) = {error, Type}</code></p>
<p>  Return value of a failed command or query.</p>

<h3 class="typedecl"><a name="type-favor_option">favor_option()</a></h3>
<p><code>favor_option() = consistency | compromise | low_latency</code></p>
<p><p>  Option to indicate where to put the cursor between freshness of the  
returned data and low latency of queries.</p>
 
  Values are:
  <ul>
  <li><code>consistent</code> means that a "consistent query" will be used in Ra. It
  will return the most up-to-date piece of data the cluster agreed on. Note
  that it could block and eventually time out if there is no quorum in the Ra
  cluster.</li>
  <li><code>compromise</code> performs "leader queries" most of the time to reduce
  latency, but uses "consistent queries" every 10 seconds to verify that the
  cluster is healthy on a regular basis. It should be faster but may block
  and time out like <code>consistent</code> and still return slightly out-of-date
  data.</li>
  <li><code>low_latency</code> means that "local queries" are used exclusively. They are
  the fastest and have the lowest latency. However, the returned data is
  whatever the local Ra server has. It could be out-of-date if it has
  troubles keeping up with the Ra cluster. The chance of blocking and timing
  out is very small.</li>
  </ul></p>

<h3 class="typedecl"><a name="type-filter_fun">filter_fun()</a></h3>
<p><code>filter_fun() = fun((<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a>, <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a>) -&gt; boolean())</code></p>
<p>  Function passed to <a docgen-rel="seemfa" docgen-href="khepri#filter/4" href="khepri.html#filter-4"><code>khepri:filter/4</code></a>.</p>

<h3 class="typedecl"><a name="type-fold_acc">fold_acc()</a></h3>
<p><code>fold_acc() = any()</code></p>
<p>  Term passed to and returned by a <a docgen-rel="seemfa" docgen-href="#fold_fun/0" href="#fold_fun-0"><code>fold_fun/0</code></a>.</p>

<h3 class="typedecl"><a name="type-fold_fun">fold_fun()</a></h3>
<p><code>fold_fun() = fun((<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a>, <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a>, <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_acc">khepri:fold_acc()</a>) -&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_acc">khepri:fold_acc()</a>)</code></p>
<p>  Function passed to <a docgen-rel="seemfa" docgen-href="khepri#fold/5" href="khepri.html#fold-5"><code>khepri:fold/5</code></a>.</p>

<h3 class="typedecl"><a name="type-foreach_fun">foreach_fun()</a></h3>
<p><code>foreach_fun() = fun((<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a>, <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a>) -&gt; any())</code></p>
<p>  Function passed to <a docgen-rel="seemfa" docgen-href="khepri#foreach/4" href="khepri.html#foreach-4"><code>khepri:foreach/4</code></a>.</p>

<h3 class="typedecl"><a name="type-many_payloads_ret">many_payloads_ret()</a></h3>
<p><code>many_payloads_ret() = <a href="#type-many_payloads_ret">many_payloads_ret</a>(undefined)</code></p>
<p><p>  The return value of query functions in the <a docgen-rel="seeerl" docgen-href="khepri" href="khepri.html"><code>khepri</code></a> module that work  
on a many nodes.</p>
 
  <code>undefined</code> is returned if a tree node has no payload attached to it.</p>

<h3 class="typedecl"><a name="type-many_payloads_ret">many_payloads_ret()</a></h3>
<p><code>many_payloads_ret(Default) = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(#{<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-path">khepri_path:path()</a> =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_fun.html#type-standalone_fun">khepri_fun:standalone_fun()</a> | Default}) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></p>
<p><p>  The return value of query functions in the <a docgen-rel="seeerl" docgen-href="khepri" href="khepri.html"><code>khepri</code></a> module that work  
on many nodes.</p>
 
  <code>Default</code> is the value to return if a tree node has no payload attached to
  it.</p>

<h3 class="typedecl"><a name="type-map_fun">map_fun()</a></h3>
<p><code>map_fun() = fun((<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a>, <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-node_props">khepri:node_props()</a>) -&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun_ret">khepri:map_fun_ret()</a>)</code></p>
<p>  Function passed to <a docgen-rel="seemfa" docgen-href="khepri#map/4" href="khepri.html#map-4"><code>khepri:map/4</code></a>.</p>

<h3 class="typedecl"><a name="type-map_fun_ret">map_fun_ret()</a></h3>
<p><code>map_fun_ret() = any()</code></p>
<p>  Value returned by <a docgen-rel="seemfa" docgen-href="khepri#map_fun/0" href="khepri.html#map_fun-0"><code>khepri:map_fun/0</code></a>.</p>

<h3 class="typedecl"><a name="type-minimal_ret">minimal_ret()</a></h3>
<p><code>minimal_ret() = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></p>
<p>  The return value of update functions in the <a docgen-rel="seeerl" docgen-href="khepri" href="khepri.html"><code>khepri</code></a> module.</p>

<h3 class="typedecl"><a name="type-node_props">node_props()</a></h3>
<p><code>node_props() = #{data =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a>, has_data =&gt; boolean(), sproc =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri_fun.html#type-standalone_fun">khepri_fun:standalone_fun()</a>, is_sproc =&gt; boolean(), payload_version =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_version">khepri:payload_version()</a>, child_list_version =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-child_list_version">khepri:child_list_version()</a>, child_list_length =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-child_list_length">khepri:child_list_length()</a>, child_names =&gt; [<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-node_id">khepri_path:node_id()</a>]}</code></p>
<p><p>  Structure used to return properties, payload and child nodes for a specific  
tree node.</p>
 
  <p>The payload in <code>data</code> or <code>sproc</code> is only returned if the tree node carries  
something. If that key is missing from the returned properties map, it means  
the tree node has no payload.</p>
 
  By default, the payload (if any) and its version are returned by functions
  exposed by <a docgen-rel="seeerl" docgen-href="khepri_adv" href="khepri_adv.html"><code>khepri_adv</code></a>. The list of returned properties can be
  configured using the <code>props_to_return</code> option (see <a docgen-rel="seetype" docgen-href="#tree_options/0" href="#type-tree_options"><code>tree_options()</code></a>).</p>

<h3 class="typedecl"><a name="type-ok">ok()</a></h3>
<p><code>ok(Type) = {ok, Type}</code></p>
<p>  The result of a function after a successful call, wrapped in an "ok" tuple.</p>

<h3 class="typedecl"><a name="type-payload_ret">payload_ret()</a></h3>
<p><code>payload_ret() = <a href="#type-payload_ret">payload_ret</a>(undefined)</code></p>
<p><p>  The return value of query functions in the <a docgen-rel="seeerl" docgen-href="khepri" href="khepri.html"><code>khepri</code></a> module that work  
on a single tree node.</p>
 
  <code>undefined</code> is returned if a tree node has no payload attached to it.</p>

<h3 class="typedecl"><a name="type-payload_ret">payload_ret()</a></h3>
<p><code>payload_ret(Default) = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(<a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_fun.html#type-standalone_fun">khepri_fun:standalone_fun()</a> | Default) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></p>
<p><p>  The return value of query functions in the <a docgen-rel="seeerl" docgen-href="khepri" href="khepri.html"><code>khepri</code></a> module that work  
on a single tree node.</p>
 
  <code>Default</code> is the value to return if a tree node has no payload attached to
  it.</p>

<h3 class="typedecl"><a name="type-payload_version">payload_version()</a></h3>
<p><code>payload_version() = pos_integer()</code></p>
<p><p>  Number of changes made to the payload of a tree node.</p>
 
  The payload version starts at 1 when a tree node is created. It is increased
  by 1 each time the payload is added, modified or removed.</p>

<h3 class="typedecl"><a name="type-put_options">put_options()</a></h3>
<p><code>put_options() = #{keep_while =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri_condition.html#type-keep_while">khepri_condition:keep_while()</a>}</code></p>
<p><p>  Options specific to updates.</p>
 
  <ul>
  <li><code>keep_while</code> allows to define keep-while conditions on the
  created/updated tree node.</li>
  </ul></p>

<h3 class="typedecl"><a name="type-query_options">query_options()</a></h3>
<p><code>query_options() = #{timeout =&gt; timeout(), favor =&gt; <a href="#type-favor_option">favor_option()</a>}</code></p>
<p><p>  Options used in queries.</p>
 
  <ul>
  <li><code>timeout</code> is passed to Ra query processing function.</li>
  <li><code>favor</code> indicates where to put the cursor between freshness of the
  returned data and low latency of queries; see <a docgen-rel="seetype" docgen-href="#favor_option/0" href="#type-favor_option"><code>favor_option()</code></a>.</li>
  </ul></p>

<h3 class="typedecl"><a name="type-reply_from_option">reply_from_option()</a></h3>
<p><code>reply_from_option() = leader | local | {member, <a href="/home/runner/work/khepri/ra/doc/ra.html#type-server_id">ra:server_id()</a>}</code></p>
<p><p>  Options to indicate which member of the cluster should reply to a command  
request.</p>
 
  <p>Note that commands are always handled by the leader. This option only  
controls which member of the cluster carries out the reply.</p>
 
  <ul>
  <li><code>leader</code>: the cluster leader will reply. This is the default value.</li>
  <li><code>{member, Member}</code>: the given cluster member will reply.</li>
  <li><code>local</code>: a member of the cluster on the same Erlang node as the caller
  will perform the reply.</li>
  </ul>
 
  When <code>reply_from</code> is <code>{member, Member}</code> and the given member is not part of
  the cluster or when <code>reply_from</code> is <code>local</code> and there is no member local to
  the caller, the leader member will perform the reply. This mechanism uses
  the cluster membership information to decide which member should reply: if
  the given <code>Member</code> or local member is a member of the cluster but is offline
  or unreachable, no reply may be sent even though the leader may have
  successfully handled the command.</p>

<h3 class="typedecl"><a name="type-store_id">store_id()</a></h3>
<p><code>store_id() = atom()</code></p>
<p><p>  ID of a Khepri store.</p>
 
  This is the same as the Ra cluster name hosting the Khepri store.</p>

<h3 class="typedecl"><a name="type-tree_options">tree_options()</a></h3>
<p><code>tree_options() = #{expect_specific_node =&gt; boolean(), props_to_return =&gt; [payload_version | child_list_version | child_list_length | child_names | payload | has_payload | raw_payload], include_root_props =&gt; boolean()}</code></p>
<p><p>  Options used during tree traversal.</p>
 
  <ul>
  <li><code>expect_specific_node</code> indicates if the path is expected to point to a
  specific tree node or could match many nodes.</li>
  <li><code>props_to_return</code> indicates the list of properties to include in the
  returned tree node properties map. The default is <code>[payload,
  payload_version]</code>. Note that <code>payload</code> and <code>has_payload</code> are a bit special:
  the actually returned properties will be <code>data</code>/<code>sproc</code> and
  <code>has_data</code>/<code>is_sproc</code> respectively. <code>raw_payload</code> is for internal use
  only.</li>
  <li><code>include_root_props</code> indicates if root properties and payload should be
  returned as well.</li>
  </ul></p>

<h3 class="typedecl"><a name="type-trigger_id">trigger_id()</a></h3>
<p><code>trigger_id() = atom()</code></p>
<p>  An ID to identify a registered trigger.</p>

<h3 class="typedecl"><a name="type-unwrapped_many_payloads_ret">unwrapped_many_payloads_ret()</a></h3>
<p><code>unwrapped_many_payloads_ret() = <a href="#type-unwrapped_many_payloads_ret">unwrapped_many_payloads_ret</a>(undefined)</code></p>


<h3 class="typedecl"><a name="type-unwrapped_many_payloads_ret">unwrapped_many_payloads_ret()</a></h3>
<p><code>unwrapped_many_payloads_ret(Default) = #{<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-path">khepri_path:path()</a> =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_fun.html#type-standalone_fun">khepri_fun:standalone_fun()</a> | Default}</code></p>


<h3 class="typedecl"><a name="type-unwrapped_minimal_ret">unwrapped_minimal_ret()</a></h3>
<p><code>unwrapped_minimal_ret() = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></p>


<h3 class="typedecl"><a name="type-unwrapped_payload_ret">unwrapped_payload_ret()</a></h3>
<p><code>unwrapped_payload_ret() = <a href="#type-unwrapped_payload_ret">unwrapped_payload_ret</a>(undefined)</code></p>


<h3 class="typedecl"><a name="type-unwrapped_payload_ret">unwrapped_payload_ret()</a></h3>
<p><code>unwrapped_payload_ret(Default) = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_fun.html#type-standalone_fun">khepri_fun:standalone_fun()</a> | Default</code></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#start-0">start/0</a></td><td>Starts a store.</td></tr>
<tr><td valign="top"><a href="#start-1">start/1</a></td><td>Starts a store.</td></tr>
<tr><td valign="top"><a href="#start-2">start/2</a></td><td>Starts a store.</td></tr>
<tr><td valign="top"><a href="#start-3">start/3</a></td><td>Starts a store.</td></tr>
<tr><td valign="top"><a href="#reset-0">reset/0</a></td><td>Resets the store on this Erlang node.</td></tr>
<tr><td valign="top"><a href="#reset-1">reset/1</a></td><td>Resets the store on this Erlang node.</td></tr>
<tr><td valign="top"><a href="#reset-2">reset/2</a></td><td>Resets the store on this Erlang node.</td></tr>
<tr><td valign="top"><a href="#stop-0">stop/0</a></td><td>Stops a store.</td></tr>
<tr><td valign="top"><a href="#stop-1">stop/1</a></td><td>Stops a store.</td></tr>
<tr><td valign="top"><a href="#get_store_ids-0">get_store_ids/0</a></td><td>Returns the list of running stores.</td></tr>
<tr><td valign="top"><a href="#get-1">get/1</a></td><td>Returns the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#get-2">get/2</a></td><td>Returns the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#get-3">get/3</a></td><td>Returns the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#get_or-2">get_or/2</a></td><td>Returns the payload of the tree node pointed to by the given path  
pattern, or a default value.</td></tr>
<tr><td valign="top"><a href="#get_or-3">get_or/3</a></td><td>Returns the payload of the tree node pointed to by the given path  
pattern, or a default value.</td></tr>
<tr><td valign="top"><a href="#get_or-4">get_or/4</a></td><td>Returns the payload of the tree node pointed to by the given path  
pattern, or a default value.</td></tr>
<tr><td valign="top"><a href="#get_many-1">get_many/1</a></td><td>Returns payloads of all the tree nodes matching the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#get_many-2">get_many/2</a></td><td>Returns payloads of all the tree nodes matching the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#get_many-3">get_many/3</a></td><td>Returns payloads of all the tree nodes matching the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#get_many_or-2">get_many_or/2</a></td><td>Returns payloads of all the tree nodes matching the given path  
pattern, or a default payload.</td></tr>
<tr><td valign="top"><a href="#get_many_or-3">get_many_or/3</a></td><td>Returns payloads of all the tree nodes matching the given path  
pattern, or a default payload.</td></tr>
<tr><td valign="top"><a href="#get_many_or-4">get_many_or/4</a></td><td>Returns payloads of all the tree nodes matching the given path  
pattern, or a default payload.</td></tr>
<tr><td valign="top"><a href="#exists-1">exists/1</a></td><td>Indicates if the tree node pointed to by the given path exists or not.</td></tr>
<tr><td valign="top"><a href="#exists-2">exists/2</a></td><td>Indicates if the tree node pointed to by the given path exists or not.</td></tr>
<tr><td valign="top"><a href="#exists-3">exists/3</a></td><td>Indicates if the tree node pointed to by the given path exists or not.</td></tr>
<tr><td valign="top"><a href="#has_data-1">has_data/1</a></td><td>Indicates if the tree node pointed to by the given path has data or  
not.</td></tr>
<tr><td valign="top"><a href="#has_data-2">has_data/2</a></td><td>Indicates if the tree node pointed to by the given path has data or  
not.</td></tr>
<tr><td valign="top"><a href="#has_data-3">has_data/3</a></td><td>Indicates if the tree node pointed to by the given path has data or  
not.</td></tr>
<tr><td valign="top"><a href="#is_sproc-1">is_sproc/1</a></td><td>Indicates if the tree node pointed to by the given path holds a stored  
procedure or not.</td></tr>
<tr><td valign="top"><a href="#is_sproc-2">is_sproc/2</a></td><td>Indicates if the tree node pointed to by the given path holds a stored  
procedure or not.</td></tr>
<tr><td valign="top"><a href="#is_sproc-3">is_sproc/3</a></td><td>Indicates if the tree node pointed to by the given path holds a stored  
procedure or not.</td></tr>
<tr><td valign="top"><a href="#count-1">count/1</a></td><td>Counts all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#count-2">count/2</a></td><td>Counts all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#count-3">count/3</a></td><td>Counts all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#fold-3">fold/3</a></td><td>Calls <code>Fun</code> on successive tree nodes matching the given path pattern,
  starting with <code>Acc</code>.</td></tr>
<tr><td valign="top"><a href="#fold-4">fold/4</a></td><td>Calls <code>Fun</code> on successive tree nodes matching the given path pattern,
  starting with <code>Acc</code>.</td></tr>
<tr><td valign="top"><a href="#fold-5">fold/5</a></td><td>Calls <code>Fun</code> on successive tree nodes matching the given path pattern,
  starting with <code>Acc</code>.</td></tr>
<tr><td valign="top"><a href="#foreach-2">foreach/2</a></td><td>Calls <code>Fun</code> for each tree node matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#foreach-3">foreach/3</a></td><td>Calls <code>Fun</code> for each tree node matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#foreach-4">foreach/4</a></td><td>Calls <code>Fun</code> for each tree node matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#map-2">map/2</a></td><td>Produces a new map by calling <code>Fun</code> for each tree node matching the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#map-3">map/3</a></td><td>Produces a new map by calling <code>Fun</code> for each tree node matching the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#map-4">map/4</a></td><td>Produces a new map by calling <code>Fun</code> for each tree node matching the  
given path pattern.</td></tr>
<tr><td valign="top"><a href="#filter-2">filter/2</a></td><td>Returns a map for which predicate <code>Pred</code> holds true in tree nodes  
matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#filter-3">filter/3</a></td><td>Returns a map for which predicate <code>Pred</code> holds true in tree nodes  
matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#filter-4">filter/4</a></td><td>Returns a map for which predicate <code>Pred</code> holds true in tree nodes  
matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#run_sproc-2">run_sproc/2</a></td><td>Runs the stored procedure pointed to by the given path and returns the  
result.</td></tr>
<tr><td valign="top"><a href="#run_sproc-3">run_sproc/3</a></td><td>Runs the stored procedure pointed to by the given path and returns the  
result.</td></tr>
<tr><td valign="top"><a href="#run_sproc-4">run_sproc/4</a></td><td>Runs the stored procedure pointed to by the given path and returns the  
result.</td></tr>
<tr><td valign="top"><a href="#put-2">put/2</a></td><td>Sets the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#put-3">put/3</a></td><td>Sets the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#put-4">put/4</a></td><td>Sets the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#put_many-2">put_many/2</a></td><td>Sets the payload of all the tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#put_many-3">put_many/3</a></td><td>Sets the payload of all the tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#put_many-4">put_many/4</a></td><td>Sets the payload of all the tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#create-2">create/2</a></td><td>Creates a tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#create-3">create/3</a></td><td>Creates a tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#create-4">create/4</a></td><td>Creates a tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#update-2">update/2</a></td><td>Updates an existing tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#update-3">update/3</a></td><td>Updates an existing tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#update-4">update/4</a></td><td>Updates an existing tree node with the given payload.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-3">compare_and_swap/3</a></td><td>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-4">compare_and_swap/4</a></td><td>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</td></tr>
<tr><td valign="top"><a href="#compare_and_swap-5">compare_and_swap/5</a></td><td>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</td></tr>
<tr><td valign="top"><a href="#delete-1">delete/1</a></td><td>Deletes the tree node pointed to by the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete-2">delete/2</a></td><td>Deletes the tree node pointed to by the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete-3">delete/3</a></td><td>Deletes the tree node pointed to by the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many-1">delete_many/1</a></td><td>Deletes all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many-2">delete_many/2</a></td><td>Deletes all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#delete_many-3">delete_many/3</a></td><td>Deletes all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#clear_payload-1">clear_payload/1</a></td><td>Deletes the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#clear_payload-2">clear_payload/2</a></td><td>Deletes the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#clear_payload-3">clear_payload/3</a></td><td>Deletes the payload of the tree node pointed to by the given path  
pattern.</td></tr>
<tr><td valign="top"><a href="#clear_many_payloads-1">clear_many_payloads/1</a></td><td>Deletes the payload of all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#clear_many_payloads-2">clear_many_payloads/2</a></td><td>Deletes the payload of all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#clear_many_payloads-3">clear_many_payloads/3</a></td><td>Deletes the payload of all tree nodes matching the given path pattern.</td></tr>
<tr><td valign="top"><a href="#register_trigger-3">register_trigger/3</a></td><td>Registers a trigger.</td></tr>
<tr><td valign="top"><a href="#register_trigger-4">register_trigger/4</a></td><td>Registers a trigger.</td></tr>
<tr><td valign="top"><a href="#register_trigger-5">register_trigger/5</a></td><td>Registers a trigger.</td></tr>
<tr><td valign="top"><a href="#register_projection-2">register_projection/2</a></td><td>Registers a projection.</td></tr>
<tr><td valign="top"><a href="#register_projection-3">register_projection/3</a></td><td>Registers a projection.</td></tr>
<tr><td valign="top"><a href="#register_projection-4">register_projection/4</a></td><td>Registers a projection.</td></tr>
<tr><td valign="top"><a href="#transaction-1">transaction/1</a></td><td>Runs a transaction and returns its result.</td></tr>
<tr><td valign="top"><a href="#transaction-2">transaction/2</a></td><td>Runs a transaction and returns its result.</td></tr>
<tr><td valign="top"><a href="#transaction-3">transaction/3</a></td><td>Runs a transaction and returns its result.</td></tr>
<tr><td valign="top"><a href="#transaction-4">transaction/4</a></td><td>Runs a transaction and returns its result.</td></tr>
<tr><td valign="top"><a href="#transaction-5">transaction/5</a></td><td>Runs a transaction and returns its result.</td></tr>
<tr><td valign="top"><a href="#wait_for_async_ret-1">wait_for_async_ret/1</a></td><td>Waits for an asynchronous call.</td></tr>
<tr><td valign="top"><a href="#wait_for_async_ret-2">wait_for_async_ret/2</a></td><td>Waits for an asynchronous call.</td></tr>
<tr><td valign="top"><a href="#get%21-1">'get!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#get%21-2">'get!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#get%21-3">'get!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_or%21-2">'get_or!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_or%21-3">'get_or!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_or%21-4">'get_or!'/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_many%21-1">'get_many!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_many%21-2">'get_many!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_many%21-3">'get_many!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_many_or%21-2">'get_many_or!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_many_or%21-3">'get_many_or!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#get_many_or%21-4">'get_many_or!'/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#exists%21-1">'exists!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#exists%21-2">'exists!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#exists%21-3">'exists!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#has_data%21-1">'has_data!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#has_data%21-2">'has_data!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#has_data%21-3">'has_data!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_sproc%21-1">'is_sproc!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_sproc%21-2">'is_sproc!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_sproc%21-3">'is_sproc!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#count%21-1">'count!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#count%21-2">'count!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#count%21-3">'count!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#put%21-2">'put!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#put%21-3">'put!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#put%21-4">'put!'/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#put_many%21-2">'put_many!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#put_many%21-3">'put_many!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#put_many%21-4">'put_many!'/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#create%21-2">'create!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#create%21-3">'create!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#create%21-4">'create!'/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#update%21-2">'update!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#update%21-3">'update!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#update%21-4">'update!'/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#compare_and_swap%21-3">'compare_and_swap!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#compare_and_swap%21-4">'compare_and_swap!'/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#compare_and_swap%21-5">'compare_and_swap!'/5</a></td><td></td></tr>
<tr><td valign="top"><a href="#delete%21-1">'delete!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#delete%21-2">'delete!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#delete%21-3">'delete!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#delete_many%21-1">'delete_many!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#delete_many%21-2">'delete_many!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#delete_many%21-3">'delete_many!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#clear_payload%21-1">'clear_payload!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#clear_payload%21-2">'clear_payload!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#clear_payload%21-3">'clear_payload!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#clear_many_payloads%21-1">'clear_many_payloads!'/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#clear_many_payloads%21-2">'clear_many_payloads!'/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#clear_many_payloads%21-3">'clear_many_payloads!'/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#export-2">export/2</a></td><td>Exports a Khepri store using the <code>Module</code> callback module.</td></tr>
<tr><td valign="top"><a href="#export-3">export/3</a></td><td>Exports a Khepri store using the <code>Module</code> callback module.</td></tr>
<tr><td valign="top"><a href="#export-4">export/4</a></td><td>Exports a Khepri store using the <code>Module</code> callback module.</td></tr>
<tr><td valign="top"><a href="#import-2">import/2</a></td><td>Imports a previously exported set of tree nodes using the <code>Module</code>  
callback module.</td></tr>
<tr><td valign="top"><a href="#import-3">import/3</a></td><td>Imports a previously exported set of tree nodes using the <code>Module</code>  
callback module.</td></tr>
<tr><td valign="top"><a href="#info-0">info/0</a></td><td>Lists the running stores on <em>stdout</em>.</td></tr>
<tr><td valign="top"><a href="#info-1">info/1</a></td><td>Lists the content of specified store on <em>stdout</em>.</td></tr>
<tr><td valign="top"><a href="#info-2">info/2</a></td><td>Lists the content of specified store on <em>stdout</em>.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="start-0">start/0</a></h3>
<div class="spec">
<p><code>start() -&gt; Ret</code>
<ul class="definitions"><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(StoreId) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li></ul></p>
<p></p>
</div><p>Starts a store.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#start-0">khepri_cluster:start/0</a>.</p>

<h3 class="function"><a name="start-1">start/1</a></h3>
<div class="spec">
<p><code>start(RaSystemOrDataDir::RaSystem | DataDir) -&gt; Ret</code>
<ul class="definitions"><li><code>RaSystem = atom()</code></li><li><code>DataDir = <a href="/home/runner/work/khepri/kernel/doc/file.html#type-filename_all">file:filename_all()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(StoreId) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li></ul></p>
<p></p>
</div><p>Starts a store.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#start-1">khepri_cluster:start/1</a>.</p>

<h3 class="function"><a name="start-2">start/2</a></h3>
<div class="spec">
<p><code>start(RaSystemOrDataDir::RaSystem | DataDir, StoreIdOrRaServerConfig::StoreId | RaServerConfig) -&gt; Ret</code>
<ul class="definitions"><li><code>RaSystem = atom()</code></li><li><code>DataDir = <a href="/home/runner/work/khepri/kernel/doc/file.html#type-filename_all">file:filename_all()</a></code></li><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>RaServerConfig = <a href="/home/runner/work/khepri/khepri/doc/khepri_cluster.html#type-incomplete_ra_server_config">khepri_cluster:incomplete_ra_server_config()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(StoreId) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li></ul></p>
<p></p>
</div><p>Starts a store.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#start-2">khepri_cluster:start/2</a>.</p>

<h3 class="function"><a name="start-3">start/3</a></h3>
<div class="spec">
<p><code>start(RaSystemOrDataDir::RaSystem | DataDir, StoreIdOrRaServerConfig::StoreId | RaServerConfig, Timeout) -&gt; Ret</code>
<ul class="definitions"><li><code>RaSystem = atom()</code></li><li><code>DataDir = <a href="/home/runner/work/khepri/kernel/doc/file.html#type-filename_all">file:filename_all()</a></code></li><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>RaServerConfig = <a href="/home/runner/work/khepri/khepri/doc/khepri_cluster.html#type-incomplete_ra_server_config">khepri_cluster:incomplete_ra_server_config()</a></code></li><li><code>Timeout = timeout()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(StoreId) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li></ul></p>
<p></p>
</div><p>Starts a store.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#start-3">khepri_cluster:start/3</a>.</p>

<h3 class="function"><a name="reset-0">reset/0</a></h3>
<div class="spec">
<p><code>reset() -&gt; Ret</code>
<ul class="definitions"><li><code>Ret = ok | <a href="#type-error">error()</a></code></li></ul></p>
<p></p>
</div><p>Resets the store on this Erlang node.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#reset-0">khepri_cluster:reset/0</a>.</p>

<h3 class="function"><a name="reset-1">reset/1</a></h3>
<div class="spec">
<p><code>reset(StoreIdOrTimeout::StoreId | Timeout) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>Timeout = timeout()</code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p>Resets the store on this Erlang node.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#reset-1">khepri_cluster:reset/1</a>.</p>

<h3 class="function"><a name="reset-2">reset/2</a></h3>
<div class="spec">
<p><code>reset(StoreId, Timeout) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>Timeout = timeout()</code></li><li><code>Ret = ok | <a href="#type-error">error()</a></code></li></ul></p>
<p></p>
</div><p>Resets the store on this Erlang node.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#reset-2">khepri_cluster:reset/2</a>.</p>

<h3 class="function"><a name="stop-0">stop/0</a></h3>
<div class="spec">
<p><code>stop() -&gt; Ret</code>
<ul class="definitions"><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p>Stops a store.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#stop-0">khepri_cluster:stop/0</a>.</p>

<h3 class="function"><a name="stop-1">stop/1</a></h3>
<div class="spec">
<p><code>stop(StoreId) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p>Stops a store.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#stop-1">khepri_cluster:stop/1</a>.</p>

<h3 class="function"><a name="get_store_ids-0">get_store_ids/0</a></h3>
<div class="spec">
<p><code>get_store_ids() -&gt; [StoreId]</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li></ul></p>
<p></p>
</div><p>Returns the list of running stores.
 </p>
<p><b>See also:</b> <a href="khepri_cluster.html#get_store_ids-0">khepri_cluster:get_store_ids/0</a>.</p>

<h3 class="function"><a name="get-1">get/1</a></h3>
<div class="spec">
<p><code>get(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Returns the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>get(StoreId, PathPattern)</code>
  with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#get-2">get/2</a>, <a href="#get-3">get/3</a>.</p>

<h3 class="function"><a name="get-2">get/2</a></h3>
<div class="spec">
<p><code>get(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret()</a></code></li></ul></p><p><code>get(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Returns the payload of the tree node pointed to by the given path  
pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>get(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>get(StoreId, PathPattern, #{})</code>.</li>
  <li><code>get(PathPattern, Options)</code>. Calling it is the same as calling
  <code>get(StoreId, PathPattern, Options)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>.</p>

<h3 class="function"><a name="get-3">get/3</a></h3>
<div class="spec">
<p><code>get(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to get.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: an <code>{ok, Payload | undefined}</code> tuple or an <code>{error, Reason}</code>
  tuple.
 </p>
</div><p><p>Returns the payload of the tree node pointed to by the given path  
pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,  
updating many nodes with the same payload is denied. That fact is checked  
before the tree node is looked up: so if a condition in the path could  
potentially match several nodes, an exception is raised, even though only  
one tree node would match at the time.</p>
 
  <p>The returned <code>{ok, Payload}</code> tuple contains the payload of the targeted
  tree node, or <code>{ok, undefined}</code> if the tree node had no payload.</p>
 
  Example: query a tree node which holds the atom <code>value</code>
  <pre><code>%% Query the tree node at `/:foo/:bar'.
{ok, value} = khepri:get(StoreId, [foo, bar]).</code></pre>
 
  Example: query an existing tree node with no payload
  <pre><code>%% Query the tree node at `/:no_payload'.
{ok, undefined} = khepri:get(StoreId, [no_payload]).</code></pre>
 
  Example: query a non-existent tree node
  <pre><code>%% Query the tree node at `/:non_existent'.
{error, ?khepri_error(node_not_found, _)} = khepri:get(
                                              StoreId, [non_existent]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#get_many-3">get_many/3</a>, <a href="#get_or-3">get_or/3</a>, <a href="khepri_adv.html#get-3">khepri_adv:get/3</a>.</p>

<h3 class="function"><a name="get_or-2">get_or/2</a></h3>
<div class="spec">
<p><code>get_or(PathPattern, Default) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret</a>(Default)</code></li></ul></p>
<p></p>
</div><p><p>Returns the payload of the tree node pointed to by the given path  
pattern, or a default value.</p>
 
  Calling this function is the same as calling <code>get_or(StoreId, PathPattern,
  Default)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#get_or-3">get_or/3</a>, <a href="#get_or-4">get_or/4</a>.</p>

<h3 class="function"><a name="get_or-3">get_or/3</a></h3>
<div class="spec">
<p><code>get_or(StoreId, PathPattern, Default) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret</a>(Default)</code></li></ul></p><p><code>get_or(PathPattern, Default, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret</a>(Default)</code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Returns the payload of the tree node pointed to by the given path  
pattern, or a default value.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>get_or(StoreId, PathPattern, Default)</code>. Calling it is the same as
  calling <code>get_or(StoreId, PathPattern, Default, #{})</code>.</li>
  <li><code>get_or(PathPattern, Default, Options)</code>. Calling it is the same as
  calling <code>get_or(StoreId, PathPattern, Default, Options)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#get_or-4">get_or/4</a>.</p>

<h3 class="function"><a name="get_or-4">get_or/4</a></h3>
<div class="spec">
<p><code>get_or(StoreId, PathPattern, Default, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret</a>(Default)</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to get.<br>
<code>Default</code>: the default value to return in case the tree node has no
         payload or does not exist.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: an <code>{ok, Payload | Default}</code> tuple or an <code>{error, Reason}</code> tuple.
 </p>
</div><p><p>Returns the payload of the tree node pointed to by the given path  
pattern, or a default value.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,  
updating many nodes with the same payload is denied. That fact is checked  
before the tree node is looked up: so if a condition in the path could  
potentially match several nodes, an exception is raised, even though only  
one tree node would match at the time.</p>
 
  <p>The returned <code>{ok, Payload}</code> tuple contains the payload of the targeted
  tree node, or <code>{ok, Default}</code> if the tree node had no payload or was not  
found.</p>
 
  Example: query a tree node which holds the atom <code>value</code>
  <pre><code>%% Query the tree node at `/:foo/:bar'.
{ok, value} = khepri:get_or(StoreId, [foo, bar], default).</code></pre>
 
  Example: query an existing tree node with no payload
  <pre><code>%% Query the tree node at `/:no_payload'.
{ok, default} = khepri:get_or(StoreId, [no_payload], default).</code></pre>
 
  Example: query a non-existent tree node
  <pre><code>%% Query the tree node at `/:non_existent'.
{ok, default} = khepri:get_or(StoreId, [non_existent], default).</code></pre>
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>, <a href="#get_many_or-4">get_many_or/4</a>, <a href="khepri_adv.html#get-3">khepri_adv:get/3</a>.</p>

<h3 class="function"><a name="get_many-1">get_many/1</a></h3>
<div class="spec">
<p><code>get_many(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Returns payloads of all the tree nodes matching the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>get_many(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#get_many-2">get_many/2</a>, <a href="#get_many-3">get_many/3</a>.</p>

<h3 class="function"><a name="get_many-2">get_many/2</a></h3>
<div class="spec">
<p><code>get_many(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p><p><code>get_many(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Returns payloads of all the tree nodes matching the given path  
pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>get_many(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>get_many(StoreId, PathPattern, #{})</code>.</li>
  <li><code>get_many(PathPattern, Options)</code>. Calling it is the same as calling
  <code>get_many(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#get_many-3">get_many/3</a>.</p>

<h3 class="function"><a name="get_many-3">get_many/3</a></h3>
<div class="spec">
<p><code>get_many(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to get.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: an <code>{ok, PayloadsMap}</code> tuple or an <code>{error, Reason}</code> tuple.
 </p>
</div><p><p>Returns payloads of all the tree nodes matching the given path  
pattern.</p>
 
  <p>Calling this function is the same as calling <code>get_many_or(StoreId,
  PathPattern, undefined, Options)</code>.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The returned <code>{ok, PayloadsMap}</code> tuple contains a map where keys correspond
  to the path to a tree node matching the path pattern. Each key then points
  to the payload of that matching tree node, or <code>Default</code> if the tree node  
had no payload.</p>
 
  Example: query all nodes in the tree
  <pre><code>%% Get all nodes in the tree. The tree is:
%% &lt;root&gt;
%% `-- foo
%%     `-- bar = value
{ok, #{[foo] := undefined,
       [foo, bar] := value}} = khepri:get_many(
                                 StoreId,
                                 [?KHEPRI_WILDCARD_STAR_STAR]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>, <a href="#get_many_or-4">get_many_or/4</a>, <a href="khepri_adv.html#get_many-3">khepri_adv:get_many/3</a>.</p>

<h3 class="function"><a name="get_many_or-2">get_many_or/2</a></h3>
<div class="spec">
<p><code>get_many_or(PathPattern, Default) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret</a>(Default)</code></li></ul></p>
<p></p>
</div><p><p>Returns payloads of all the tree nodes matching the given path  
pattern, or a default payload.</p>
 
  Calling this function is the same as calling <code>get_many_or(StoreId,
  PathPattern, Default)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#get_many_or-3">get_many_or/3</a>, <a href="#get_many_or-4">get_many_or/4</a>.</p>

<h3 class="function"><a name="get_many_or-3">get_many_or/3</a></h3>
<div class="spec">
<p><code>get_many_or(StoreId, PathPattern, Default) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret</a>(Default)</code></li></ul></p><p><code>get_many_or(PathPattern, Default, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret</a>(Default)</code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Returns payloads of all the tree nodes matching the given path  
pattern, or a default payload.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>get_many_or(StoreId, PathPattern, Default)</code>. Calling it is the same as
  calling <code>get_many_or(StoreId, PathPattern, Default, #{})</code>.</li>
  <li><code>get_many_or(PathPattern, Default, Options)</code>. Calling it is the same as
  calling <code>get_many_or(StoreId, PathPattern, Default, Options)</code> with the
  default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#get_many_or-4">get_many_or/4</a>.</p>

<h3 class="function"><a name="get_many_or-4">get_many_or/4</a></h3>
<div class="spec">
<p><code>get_many_or(StoreId, PathPattern, Default, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret</a>(Default)</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to get.<br>
<code>Default</code>: the default value to set in <code>PayloadsMap</code> for tree nodes
         with no payload.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: an <code>{ok, PayloadsMap}</code> tuple or an <code>{error, Reason}</code> tuple.
 </p>
</div><p><p>Returns payloads of all the tree nodes matching the given path  
pattern, or a default payload.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The returned <code>{ok, PayloadsMap}</code> tuple contains a map where keys correspond
  to the path to a tree node matching the path pattern. Each key then points
  to the payload of that matching tree node, or <code>Default</code> if the tree node  
had no payload.</p>
 
  Example: query all nodes in the tree
  <pre><code>%% Get all nodes in the tree. The tree is:
%% &lt;root&gt;
%% `-- foo
%%     `-- bar = value
{ok, #{[foo] := default,
       [foo, bar] := value}} = khepri:get_many_or(
                                 StoreId,
                                 [?KHEPRI_WILDCARD_STAR_STAR],
                                 default).</code></pre>
 </p>
<p><b>See also:</b> <a href="#get_many-3">get_many/3</a>, <a href="#get_or-4">get_or/4</a>, <a href="khepri_adv.html#get_many-3">khepri_adv:get_many/3</a>.</p>

<h3 class="function"><a name="exists-1">exists/1</a></h3>
<div class="spec">
<p><code>exists(PathPattern) -&gt; Exists | Error</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Exists = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p><p>Indicates if the tree node pointed to by the given path exists or not.</p>
 
  Calling this function is the same as calling <code>exists(StoreId, PathPattern)</code>
  with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#exists-2">exists/2</a>, <a href="#exists-3">exists/3</a>.</p>

<h3 class="function"><a name="exists-2">exists/2</a></h3>
<div class="spec">
<p><code>exists(StoreId, PathPattern) -&gt; Exists | Error</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Exists = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p><p><code>exists(PathPattern, Options) -&gt; Exists | Error</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Exists = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Indicates if the tree node pointed to by the given path exists or not.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>exists(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>exists(StoreId, PathPattern, #{})</code>.</li>
  <li><code>exists(PathPattern, Options)</code>. Calling it is the same as calling
  <code>exists(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#exists-3">exists/3</a>.</p>

<h3 class="function"><a name="exists-3">exists/3</a></h3>
<div class="spec">
<p><code>exists(StoreId, PathPattern, Options) -&gt; Exists | Error</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Exists = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the nodes to check.<br>
<code>Options</code>: query options such as <code>favor</code>.
 <br>
</p>
<p>returns: <code>true</code> if the tree node exists, <code>false</code> if it does not, or an
  <code>{error, Reason}</code> tuple.
 </p>
</div><p><p>Indicates if the tree node pointed to by the given path exists or not.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  The <code>PathPattern</code> must target a specific tree node. In other words,
  updating many nodes with the same payload is denied. That fact is checked
  before the tree node is looked up: so if a condition in the path could
  potentially match several nodes, an exception is raised, even though only
  one tree node would match at the time.
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>.</p>

<h3 class="function"><a name="has_data-1">has_data/1</a></h3>
<div class="spec">
<p><code>has_data(PathPattern) -&gt; HasData | Error</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>HasData = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p><p>Indicates if the tree node pointed to by the given path has data or  
not.</p>
 
  Calling this function is the same as calling <code>has_data(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#has_data-2">has_data/2</a>, <a href="#has_data-3">has_data/3</a>.</p>

<h3 class="function"><a name="has_data-2">has_data/2</a></h3>
<div class="spec">
<p><code>has_data(StoreId, PathPattern) -&gt; HasData | Error</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>HasData = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p><p><code>has_data(PathPattern, Options) -&gt; HasData | Error</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>HasData = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Indicates if the tree node pointed to by the given path has data or  
not.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>has_data(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>has_data(StoreId, PathPattern, #{})</code>.</li>
  <li><code>has_data(PathPattern, Options)</code>. Calling it is the same as calling
  <code>has_data(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#has_data-3">has_data/3</a>.</p>

<h3 class="function"><a name="has_data-3">has_data/3</a></h3>
<div class="spec">
<p><code>has_data(StoreId, PathPattern, Options) -&gt; HasData | Error</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>HasData = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the nodes to check.<br>
<code>Options</code>: query options such as <code>favor</code>.
 <br>
</p>
<p>returns: <code>true</code> if tree the node holds data, <code>false</code> if it does not exist,
  has no payload or holds a stored procedure, or an <code>{error, Reason}</code> tuple.
 </p>
</div><p><p>Indicates if the tree node pointed to by the given path has data or  
not.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  The <code>PathPattern</code> must target a specific tree node. In other words,
  updating many nodes with the same payload is denied. That fact is checked
  before the tree node is looked up: so if a condition in the path could
  potentially match several nodes, an exception is raised, even though only
  one tree node would match at the time.
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>.</p>

<h3 class="function"><a name="is_sproc-1">is_sproc/1</a></h3>
<div class="spec">
<p><code>is_sproc(PathPattern) -&gt; IsSproc | Error</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>IsSproc = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p><p>Indicates if the tree node pointed to by the given path holds a stored  
procedure or not.</p>
 
  Calling this function is the same as calling <code>is_sproc(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#is_sproc-2">is_sproc/2</a>, <a href="#is_sproc-3">is_sproc/3</a>.</p>

<h3 class="function"><a name="is_sproc-2">is_sproc/2</a></h3>
<div class="spec">
<p><code>is_sproc(StoreId, PathPattern) -&gt; IsSproc | Error</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>IsSproc = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p><p><code>is_sproc(PathPattern, Options) -&gt; IsSproc | Error</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>IsSproc = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Indicates if the tree node pointed to by the given path holds a stored  
procedure or not.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>is_sproc(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>is_sproc(StoreId, PathPattern, #{})</code>.</li>
  <li><code>is_sproc(PathPattern, Options)</code>. Calling it is the same as calling
  <code>is_sproc(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#is_sproc-3">is_sproc/3</a>.</p>

<h3 class="function"><a name="is_sproc-3">is_sproc/3</a></h3>
<div class="spec">
<p><code>is_sproc(StoreId, PathPattern, Options) -&gt; IsSproc | Error</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>IsSproc = boolean()</code></li><li><code>Error = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the nodes to check.<br>
<code>Options</code>: query options such as <code>favor</code>.
 <br>
</p>
<p>returns: <code>true</code> if the tree node holds a stored procedure, <code>false</code> if it
  does not exist, has no payload or holds data, or an <code>{error, Reason}</code>
  tuple.
 </p>
</div><p><p>Indicates if the tree node pointed to by the given path holds a stored  
procedure or not.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  The <code>PathPattern</code> must target a specific tree node. In other words,
  updating many nodes with the same payload is denied. That fact is checked
  before the tree node is looked up: so if a condition in the path could
  potentially match several nodes, an exception is raised, even though only
  one tree node would match at the time.
 </p>
<p><b>See also:</b> <a href="#get-3">get/3</a>.</p>

<h3 class="function"><a name="count-1">count/1</a></h3>
<div class="spec">
<p><code>count(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="#type-ok">ok</a>(Count) | <a href="#type-error">error()</a></code></li><li><code>Count = non_neg_integer()</code></li></ul></p>
<p></p>
</div><p><p>Counts all tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>count(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#count-2">count/2</a>, <a href="#count-3">count/3</a>.</p>

<h3 class="function"><a name="count-2">count/2</a></h3>
<div class="spec">
<p><code>count(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="#type-ok">ok</a>(Count) | <a href="#type-error">error()</a></code></li><li><code>Count = non_neg_integer()</code></li></ul></p><p><code>count(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="#type-ok">ok</a>(Count) | <a href="#type-error">error()</a></code></li><li><code>Count = non_neg_integer()</code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Counts all tree nodes matching the given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>count(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>count(StoreId, PathPattern, #{})</code>.</li>
  <li><code>count(PathPattern, Options)</code>. Calling it is the same as calling
  <code>count(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#count-3">count/3</a>.</p>

<h3 class="function"><a name="count-3">count/3</a></h3>
<div class="spec">
<p><code>count(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="#type-ok">ok</a>(Count) | <a href="#type-error">error()</a></code></li><li><code>Count = non_neg_integer()</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the nodes to count.<br>
<code>Options</code>: query options such as <code>favor</code>.
 <br>
</p>
<p>returns: an <code>{ok, Count}</code> tuple with the number of matching tree nodes, or
  an <code>{error, Reason}</code> tuple.</p>
</div><p><p>Counts all tree nodes matching the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The root node is not included in the count.</p>
 
  Example:
  <pre><code>%% Query the tree node at `/:foo/:bar'.
{ok, 3} = khepri:count(StoreId, [foo, ?KHEPRI_WILDCARD_STAR]).</code></pre>
 </p>

<h3 class="function"><a name="fold-3">fold/3</a></h3>
<div class="spec">
<p><code>fold(PathPattern, Fun, Acc) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_fun">khepri:fold_fun()</a></code></li><li><code>Acc = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_acc">khepri:fold_acc()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(NewAcc) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>NewAcc = Acc</code></li></ul></p>
<p></p>
</div><p><p>Calls <code>Fun</code> on successive tree nodes matching the given path pattern,
  starting with <code>Acc</code>.</p>
 
  Calling this function is the same as calling <code>fold(StoreId, PathPattern,
  Fun, Acc)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#fold-4">fold/4</a>, <a href="#fold-5">fold/5</a>.</p>

<h3 class="function"><a name="fold-4">fold/4</a></h3>
<div class="spec">
<p><code>fold(StoreId, PathPattern, Fun, Acc) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_fun">khepri:fold_fun()</a></code></li><li><code>Acc = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_acc">khepri:fold_acc()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(NewAcc) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>NewAcc = Acc</code></li></ul></p><p><code>fold(PathPattern, Fun, Acc, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_fun">khepri:fold_fun()</a></code></li><li><code>Acc = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_acc">khepri:fold_acc()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(NewAcc) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>NewAcc = Acc</code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Calls <code>Fun</code> on successive tree nodes matching the given path pattern,
  starting with <code>Acc</code>.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>fold(StoreId, PathPattern, Fun, Acc)</code>. Calling it is the same as
  calling <code>fold(StoreId, PathPattern, Fun, Acc, #{})</code>.</li>
  <li><code>fold(PathPattern, Fun, Acc, Options)</code>. Calling it is the same as
  calling <code>fold(StoreId, PathPattern, Fun, Acc, Options)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#fold-5">fold/5</a>.</p>

<h3 class="function"><a name="fold-5">fold/5</a></h3>
<div class="spec">
<p><code>fold(StoreId, PathPattern, Fun, Acc, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_fun">khepri:fold_fun()</a></code></li><li><code>Acc = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-fold_acc">khepri:fold_acc()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(NewAcc) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>NewAcc = Acc</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to get.<br>
<code>Fun</code>: the function to call for each matching tree node.<br>
<code>Acc</code>: the Erlang term to pass to the first call to <code>Fun</code>.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: an <code>{ok, NewAcc}</code> tuple or an <code>{error, Reason}</code> tuple.</p>
</div><p><p>Calls <code>Fun</code> on successive tree nodes matching the given path pattern,
  starting with <code>Acc</code>.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  Like the function passed to <a docgen-rel="seemfa" docgen-href="maps#fold/3" href="maps.html#fold-3"><code>maps:fold/3</code></a>, <code>Fun</code> must accept the
  following arguments:
  <ol>
  <li>the native path of the tree node being handled</li>
  <li>the tree node properties map</li>
  <li>an Erlang term which is either <code>Acc</code> for the first matched tree node, or
  the return value of the previous call to <code>Fun</code></li>
  </ol>
 
  <p>The returned <code>{ok, NewAcc}</code> tuple contains the return value of the last call
  to <code>Fun</code>, or <code>Acc</code> if no tree nodes matched the given path pattern.</p>
 
  Example: list all nodes in the tree
  <pre><code>%% List all tree node paths in the tree. The tree is:
%% &lt;root&gt;
%% `-- foo
%%     `-- bar = value
{ok, [[foo], [foo, bar]]} = khepri:fold(
                              StoreId,
                              [?KHEPRI_WILDCARD_STAR_STAR],
                              fun(Path, _NodeProps, Acc) -&gt;
                                  [Path | Acc]
                              end, []).</code></pre>
 </p>

<h3 class="function"><a name="foreach-2">foreach/2</a></h3>
<div class="spec">
<p><code>foreach(PathPattern, Fun) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-foreach_fun">khepri:foreach_fun()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p><p>Calls <code>Fun</code> for each tree node matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>foreach(StoreId, PathPattern,
  Fun)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#foreach-3">foreach/3</a>, <a href="#foreach-4">foreach/4</a>.</p>

<h3 class="function"><a name="foreach-3">foreach/3</a></h3>
<div class="spec">
<p><code>foreach(StoreId, PathPattern, Fun) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-foreach_fun">khepri:foreach_fun()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p><p><code>foreach(PathPattern, Fun, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-foreach_fun">khepri:foreach_fun()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Calls <code>Fun</code> for each tree node matching the given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>foreach(StoreId, PathPattern, Fun)</code>. Calling it is the same as
  calling <code>foreach(StoreId, PathPattern, Fun, #{})</code>.</li>
  <li><code>foreach(PathPattern, Fun, Options)</code>. Calling it is the same as
  calling <code>foreach(StoreId, PathPattern, Fun, Options)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#foreach-4">foreach/4</a>.</p>

<h3 class="function"><a name="foreach-4">foreach/4</a></h3>
<div class="spec">
<p><code>foreach(StoreId, PathPattern, Fun, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-foreach_fun">khepri:foreach_fun()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to get.<br>
<code>Fun</code>: the function to call for each matching tree node.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: <code>ok</code> or an <code>{error, Reason}</code> tuple.</p>
</div><p><p>Calls <code>Fun</code> for each tree node matching the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  Like the function passed to <a docgen-rel="seemfa" docgen-href="maps#foreach/2" href="maps.html#foreach-2"><code>maps:foreach/2</code></a>, <code>Fun</code> must accept the
  following arguments:
  <ol>
  <li>the native path of the tree node being handled</li>
  <li>the tree node properties map</li>
  </ol>
 
  Example: print all nodes in the tree
  <pre><code>%% Print all tree node paths in the tree. The tree is:
%% &lt;root&gt;
%% `-- foo
%%     `-- bar = value
ok = khepri:foreach(
          StoreId,
          [?KHEPRI_WILDCARD_STAR_STAR],
          fun(Path, _NodeProps) -&gt;
              io:format("Path ~0p~n", [Path])
          end).</code></pre>
 </p>

<h3 class="function"><a name="map-2">map/2</a></h3>
<div class="spec">
<p><code>map(PathPattern, Fun) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun">khepri:map_fun()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(Map) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>Map = #{<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a> =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun_ret">khepri:map_fun_ret()</a>}</code></li></ul></p>
<p></p>
</div><p><p>Produces a new map by calling <code>Fun</code> for each tree node matching the  
given path pattern.</p>
 
  Calling this function is the same as calling <code>map(StoreId, PathPattern,
  Fun)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#map-3">map/3</a>, <a href="#map-4">map/4</a>.</p>

<h3 class="function"><a name="map-3">map/3</a></h3>
<div class="spec">
<p><code>map(StoreId, PathPattern, Fun) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun">khepri:map_fun()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(Map) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>Map = #{<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a> =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun_ret">khepri:map_fun_ret()</a>}</code></li></ul></p><p><code>map(PathPattern, Fun, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun">khepri:map_fun()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(Map) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>Map = #{<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a> =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun_ret">khepri:map_fun_ret()</a>}</code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Produces a new map by calling <code>Fun</code> for each tree node matching the  
given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>map(StoreId, PathPattern, Fun)</code>. Calling it is the same as
  calling <code>map(StoreId, PathPattern, Fun, #{})</code>.</li>
  <li><code>map(PathPattern, Fun, Options)</code>. Calling it is the same as
  calling <code>map(StoreId, PathPattern, Fun, Options)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#map-4">map/4</a>.</p>

<h3 class="function"><a name="map-4">map/4</a></h3>
<div class="spec">
<p><code>map(StoreId, PathPattern, Fun, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun">khepri:map_fun()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-ok">khepri:ok</a>(Map) | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li><li><code>Map = #{<a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-native_path">khepri_path:native_path()</a> =&gt; <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-map_fun_ret">khepri:map_fun_ret()</a>}</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to get.<br>
<code>Fun</code>: the function to call for each matching tree node.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: <code>{ok, Map}</code> or an <code>{error, Reason}</code> tuple.</p>
</div><p><p>Produces a new map by calling <code>Fun</code> for each tree node matching the  
given path pattern.</p>
 
  <p>The produced map uses the tree node path as the key, like <a docgen-rel="seemfa" docgen-href="#get_many/3" href="#get_many-3"><code>get_many/3</code></a>
  and the return value of <code>Fun</code> as the value.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  Like the function passed to <a docgen-rel="seemfa" docgen-href="maps#map/2" href="maps.html#map-2"><code>maps:map/2</code></a>, <code>Fun</code> must accept the
  following arguments:
  <ol>
  <li>the native path of the tree node being handled</li>
  <li>the tree node properties map</li>
  </ol>
 
  Example: create a map of the form "native path =&gt; string path"
  <pre><code>%% The tree is:
%% &lt;root&gt;
%% `-- foo
%%     `-- bar = value
{ok, #{[foo] =&gt; "/:foo",
       [foo, bar] =&gt; "/:foo/:bar"}} = khepri:map(
                                        StoreId,
                                        [?KHEPRI_WILDCARD_STAR_STAR],
                                        fun(Path, _NodeProps) -&gt;
                                            khepri_path:to_string(Path)
                                        end).</code></pre>
 </p>

<h3 class="function"><a name="filter-2">filter/2</a></h3>
<div class="spec">
<p><code>filter(PathPattern, Pred) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Pred = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-filter_fun">khepri:filter_fun()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Returns a map for which predicate <code>Pred</code> holds true in tree nodes  
matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>filter(StoreId, PathPattern,
  Pred)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#filter-3">filter/3</a>, <a href="#filter-4">filter/4</a>.</p>

<h3 class="function"><a name="filter-3">filter/3</a></h3>
<div class="spec">
<p><code>filter(StoreId, PathPattern, Pred) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Pred = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-filter_fun">khepri:filter_fun()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p><p><code>filter(PathPattern, Pred, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Pred = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-filter_fun">khepri:filter_fun()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Returns a map for which predicate <code>Pred</code> holds true in tree nodes  
matching the given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>filter(StoreId, PathPattern, Pred)</code>. Calling it is the same as
  calling <code>filter(StoreId, PathPattern, Pred, #{})</code>.</li>
  <li><code>filter(PathPattern, Pred, Options)</code>. Calling it is the same as
  calling <code>filter(StoreId, PathPattern, Pred, Options)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#filter-4">filter/4</a>.</p>

<h3 class="function"><a name="filter-4">filter/4</a></h3>
<div class="spec">
<p><code>filter(StoreId, PathPattern, Pred, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Pred = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-filter_fun">khepri:filter_fun()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to get.<br>
<code>Pred</code>: the function to call for each matching tree node.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: <code>{ok, Map}</code> or an <code>{error, Reason}</code> tuple.</p>
</div><p><p>Returns a map for which predicate <code>Pred</code> holds true in tree nodes  
matching the given path pattern.</p>
 
  <p>The produced map only contains tree nodes for which <code>Pred</code> returned true.
  The map has the same form as the one returned by <a docgen-rel="seemfa" docgen-href="#get_many/3" href="#get_many-3"><code>get_many/3</code></a>  
otherwise.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  Like the function passed to <a docgen-rel="seemfa" docgen-href="maps#filter/2" href="maps.html#filter-2"><code>maps:filter/2</code></a>, <code>Pred</code> must accept the
  following arguments:
  <ol>
  <li>the native path of the tree node being handled</li>
  <li>the tree node properties filter</li>
  </ol>
 
  Example: only keep tree nodes under <code>/:foo</code>
  <pre><code>%% The tree is:
%% &lt;root&gt;
%% `-- foo
%%     `-- bar = value
{ok, #{[foo] =&gt; undefined,
       [foo, bar] =&gt; value}} = khepri:filter(
                                 StoreId,
                                 [?KHEPRI_WILDCARD_STAR_STAR],
                                 fun
                                   ([foo | _], _NodeProps) -&gt; true;
                                   (_Path, _NodeProps)     -&gt; false
                                 end).</code></pre>
 </p>

<h3 class="function"><a name="run_sproc-2">run_sproc/2</a></h3>
<div class="spec">
<p><code>run_sproc(PathPattern, Args) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>Ret = any()</code></li></ul></p>
<p></p>
</div><p><p>Runs the stored procedure pointed to by the given path and returns the  
result.</p>
 
  Calling this function is the same as calling <code>run_sproc(StoreId,
  PathPattern, Args)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#run_sproc-3">run_sproc/3</a>, <a href="#run_sproc-4">run_sproc/4</a>.</p>

<h3 class="function"><a name="run_sproc-3">run_sproc/3</a></h3>
<div class="spec">
<p><code>run_sproc(StoreId, PathPattern, Args) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>Ret = any()</code></li></ul></p><p><code>run_sproc(PathPattern, Args, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = any()</code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Runs the stored procedure pointed to by the given path and returns the  
result.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>run_sproc(StoreId, PathPattern, Args)</code>. Calling it is the same as
  calling <code>run_sproc(StoreId, PathPattern, Args, #{})</code>.</li>
  <li><code>run_sproc(PathPattern, Args, Options)</code>. Calling it is the same as
  calling <code>run_sproc(StoreId, PathPattern, Args, Options)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#run_sproc-4">run_sproc/4</a>.</p>

<h3 class="function"><a name="run_sproc-4">run_sproc/4</a></h3>
<div class="spec">
<p><code>run_sproc(StoreId, PathPattern, Args, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Ret = any()</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node holding the
         stored procedure.<br>
<code>Args</code>: the list of args to pass to the stored procedure; its length
         must be equal to the stored procedure arity.<br>
<code>Options</code>: query options.
 <br>
</p>
<p>returns: the result of the stored procedure execution, or throws an
  exception if the tree node does not exist, does not hold a stored procedure
  or if there was an error.
 </p>
</div><p><p>Runs the stored procedure pointed to by the given path and returns the  
result.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,  
updating many nodes with the same payload is denied. That fact is checked  
before the tree node is looked up: so if a condition in the path could  
potentially match several nodes, an exception is raised, even though only  
one tree node would match at the time.</p>
 
  The length of the <code>Args</code> list must match the number of arguments expected by
  the stored procedure.
 </p>
<p><b>See also:</b> <a href="#is_sproc-3">is_sproc/3</a>.</p>

<h3 class="function"><a name="put-2">put/2</a></h3>
<div class="spec">
<p><code>put(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>put(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#put-3">put/3</a>, <a href="#put-4">put/4</a>.</p>

<h3 class="function"><a name="put-3">put/3</a></h3>
<div class="spec">
<p><code>put(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>put(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#put-4">put/4</a>.</p>

<h3 class="function"><a name="put-4">put/4</a></h3>
<div class="spec">
<p><code>put(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to create or
         modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Sets the payload of the tree node pointed to by the given path  
pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,  
updating many nodes with the same payload is denied. That fact is checked  
before the tree node is looked up: so if a condition in the path could  
potentially match several nodes, an exception is raised, even though only  
one tree node would match at the time.</p>
 
  <p>When using a simple path (i.e. without conditions), if the targeted tree  
node does not exist, it is created using the given payload. If the  
targeted tree node exists, it is updated with the given payload and its  
payload version is increased by one. Missing parent nodes are created on  
the way.</p>
 
  <p>When using a path pattern, the behavior is the same. However if a condition  
in the path pattern is not met, an error is returned and the tree structure  
is not modified.</p>
 
  The payload must be one of the following form:
  <ul>
  <li>An explicit absence of payload (<a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>),
  using the marker returned by <a docgen-rel="seemfa" docgen-href="khepri_payload#none/0" href="khepri_payload.html#none-0"><code>khepri_payload:none/0</code></a>, meaning there
  will be no payload attached to the tree node and the existing payload will
  be discarded if any</li>
  <li>An anonymous function; it will be considered a stored procedure and
  will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#sproc/0" href="khepri_payload.html#type-sproc"><code>khepri_payload:sproc()</code></a> record</li>
  <li>Any other term; it will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#data/0" href="khepri_payload.html#type-data"><code>khepri_payload:data()</code></a>
  record</li>
  </ul>
 
  <p>It is possible to wrap the payload in its internal structure explicitly
  using the <a docgen-rel="seeerl" docgen-href="khepri_payload" href="khepri_payload.html"><code>khepri_payload</code></a> module directly.</p>
 
  <p>The <code>Options</code> map may specify command-level options; see <a docgen-rel="seetype" docgen-href="khepri#command_options/0" href="khepri.html#type-command_options"><code>khepri:command_options()</code></a>, <a docgen-rel="seetype" docgen-href="khepri#tree_options/0" href="khepri.html#type-tree_options"><code>khepri:tree_options()</code></a> and <a docgen-rel="seetype" docgen-href="khepri#put_options/0" href="khepri.html#type-put_options"><code>khepri:put_options()</code></a>.</p>
 
  <p>When doing an asynchronous update, the <a docgen-rel="seemfa" docgen-href="#wait_for_async_ret/1" href="#wait_for_async_ret-1"><code>wait_for_async_ret/1</code></a>  
function can be used to receive the message from Ra.</p>
 
  Example:
  <pre><code>%% Insert a tree node at `/:foo/:bar', overwriting the previous value.
ok = khepri_adv:put(StoreId, [foo, bar], new_value).</code></pre>
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-5">compare_and_swap/5</a>, <a href="#create-4">create/4</a>, <a href="#put_many-4">put_many/4</a>, <a href="#update-4">update/4</a>, <a href="khepri_adv.html#put-4">khepri_adv:put/4</a>.</p>

<h3 class="function"><a name="put_many-2">put_many/2</a></h3>
<div class="spec">
<p><code>put_many(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of all the tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>put_many(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#put_many-3">put_many/3</a>, <a href="#put_many-4">put_many/4</a>.</p>

<h3 class="function"><a name="put_many-3">put_many/3</a></h3>
<div class="spec">
<p><code>put_many(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Sets the payload of all the tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>put_many(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#put_many-4">put_many/4</a>.</p>

<h3 class="function"><a name="put_many-4">put_many/4</a></h3>
<div class="spec">
<p><code>put_many(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to create or
         modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Sets the payload of all the tree nodes matching the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>When using a simple path (i.e. without conditions), if the targeted tree  
node does not exist, it is created using the given payload. If the  
targeted tree node exists, it is updated with the given payload and its  
payload version is increased by one. Missing parent nodes are created on  
the way.</p>
 
  <p>When using a path pattern, the behavior is the same. However if a condition  
in the path pattern is not met, an error is returned and the tree structure  
is not modified.</p>
 
  The payload must be one of the following form:
  <ul>
  <li>An explicit absence of payload (<a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>),
  using the marker returned by <a docgen-rel="seemfa" docgen-href="khepri_payload#none/0" href="khepri_payload.html#none-0"><code>khepri_payload:none/0</code></a>, meaning there
  will be no payload attached to the tree node and the existing payload will
  be discarded if any</li>
  <li>An anonymous function; it will be considered a stored procedure and
  will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#sproc/0" href="khepri_payload.html#type-sproc"><code>khepri_payload:sproc()</code></a> record</li>
  <li>Any other term; it will be wrapped in a <a docgen-rel="seetype" docgen-href="khepri_payload#data/0" href="khepri_payload.html#type-data"><code>khepri_payload:data()</code></a>
  record</li>
  </ul>
 
  <p>It is possible to wrap the payload in its internal structure explicitly
  using the <a docgen-rel="seeerl" docgen-href="khepri_payload" href="khepri_payload.html"><code>khepri_payload</code></a> module directly.</p>
 
  <p>The <code>Options</code> map may specify command-level options; see <a docgen-rel="seetype" docgen-href="khepri#command_options/0" href="khepri.html#type-command_options"><code>khepri:command_options()</code></a>, <a docgen-rel="seetype" docgen-href="khepri#tree_options/0" href="khepri.html#type-tree_options"><code>khepri:tree_options()</code></a> and <a docgen-rel="seetype" docgen-href="khepri#put_options/0" href="khepri.html#type-put_options"><code>khepri:put_options()</code></a>.</p>
 
  <p>When doing an asynchronous update, the <a docgen-rel="seemfa" docgen-href="#wait_for_async_ret/1" href="#wait_for_async_ret-1"><code>wait_for_async_ret/1</code></a>  
function can be used to receive the message from Ra.</p>
 
  Example:
  <pre><code>%% Insert a tree node at `/:foo/:bar', overwriting the previous value.
ok = khepri_adv:put(StoreId, [foo, bar], new_value).</code></pre>
 </p>
<p><b>See also:</b> <a href="#put-4">put/4</a>, <a href="khepri_adv.html#put_many-4">khepri_adv:put_many/4</a>.</p>

<h3 class="function"><a name="create-2">create/2</a></h3>
<div class="spec">
<p><code>create(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Creates a tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>create(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#create-3">create/3</a>, <a href="#create-4">create/4</a>.</p>

<h3 class="function"><a name="create-3">create/3</a></h3>
<div class="spec">
<p><code>create(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Creates a tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>create(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#create-4">create/4</a>.</p>

<h3 class="function"><a name="create-4">create/4</a></h3>
<div class="spec">
<p><code>create(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to create.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Creates a tree node with the given payload.</p>
 
  <p>The behavior is the same as <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a> except that if the tree node
  already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple is  
returned.</p>
 
  Internally, the <code>PathPattern</code> is modified to include an
  <code>#if_node_exists{exists = false}</code> condition on its last component.
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-5">compare_and_swap/5</a>, <a href="#put-4">put/4</a>, <a href="#update-4">update/4</a>, <a href="khepri_adv.html#create-4">khepri_adv:create/4</a>.</p>

<h3 class="function"><a name="update-2">update/2</a></h3>
<div class="spec">
<p><code>update(PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>update(StoreId, PathPattern,
  Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#update-3">update/3</a>, <a href="#update-4">update/4</a>.</p>

<h3 class="function"><a name="update-3">update/3</a></h3>
<div class="spec">
<p><code>update(StoreId, PathPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload.</p>
 
  Calling this function is the same as calling <code>update(StoreId, PathPattern,
  Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#update-4">update/4</a>.</p>

<h3 class="function"><a name="update-4">update/4</a></h3>
<div class="spec">
<p><code>update(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Updates an existing tree node with the given payload.</p>
 
  <p>The behavior is the same as <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a> except that if the tree node
  already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple is  
returned.</p>
 
  Internally, the <code>PathPattern</code> is modified to include an
  <code>#if_node_exists{exists = true}</code> condition on its last component.
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-5">compare_and_swap/5</a>, <a href="#create-4">create/4</a>, <a href="#put-4">put/4</a>, <a href="khepri_adv.html#update-4">khepri_adv:update/4</a>.</p>

<h3 class="function"><a name="compare_and_swap-3">compare_and_swap/3</a></h3>
<div class="spec">
<p><code>compare_and_swap(PathPattern, DataPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</p>
 
  Calling this function is the same as calling <code>compare_and_swap(StoreId,
  PathPattern, DataPattern, Data)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-4">compare_and_swap/4</a>, <a href="#compare_and_swap-5">compare_and_swap/5</a>.</p>

<h3 class="function"><a name="compare_and_swap-4">compare_and_swap/4</a></h3>
<div class="spec">
<p><code>compare_and_swap(StoreId, PathPattern, DataPattern, Data) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</p>
 
  Calling this function is the same as calling <code>compare_and_swap(StoreId,
  PathPattern, DataPattern, Data, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#compare_and_swap-5">compare_and_swap/5</a>.</p>

<h3 class="function"><a name="compare_and_swap-5">compare_and_swap/5</a></h3>
<div class="spec">
<p><code>compare_and_swap(StoreId, PathPattern, DataPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to modify.<br>
<code>Data</code>: the Erlang term or function to store, or a <a docgen-rel="seetype" docgen-href="khepri_payload#payload/0" href="khepri_payload.html#type-payload"><code>khepri_payload:payload()</code></a> structure.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Updates an existing tree node with the given payload only if its data  
matches the given pattern.</p>
 
  <p>The behavior is the same as <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a> except that if the tree node
  already exists, an <code>{error, ?khepri_error(mismatching_node, Info)}</code> tuple is  
returned.</p>
 
  Internally, the <code>PathPattern</code> is modified to include an
  <code>#if_data_matches{pattern = DataPattern}</code> condition on its last component.
 </p>
<p><b>See also:</b> <a href="#create-4">create/4</a>, <a href="#put-4">put/4</a>, <a href="#update-4">update/4</a>, <a href="khepri_adv.html#compare_and_swap-5">khepri_adv:compare_and_swap/5</a>.</p>

<h3 class="function"><a name="delete-1">delete/1</a></h3>
<div class="spec">
<p><code>delete(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the tree node pointed to by the given path pattern.</p>
 
  Calling this function is the same as calling <code>delete(StoreId, PathPattern)</code>
  with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#delete-2">delete/2</a>, <a href="#delete-3">delete/3</a>.</p>

<h3 class="function"><a name="delete-2">delete/2</a></h3>
<div class="spec">
<p><code>delete(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p><p><code>delete(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Deletes the tree node pointed to by the given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>delete(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, #{})</code>.</li>
  <li><code>delete(PathPattern, Options)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#delete-3">delete/3</a>.</p>

<h3 class="function"><a name="delete-3">delete/3</a></h3>
<div class="spec">
<p><code>delete(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the node to delete.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Deletes the tree node pointed to by the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p>The <code>PathPattern</code> must target a specific tree node. In other words,
  updating many nodes with the same payload is denied. That fact is checked
  before the tree node is looked up: so if a condition in the path could
  potentially match several nodes, an exception is raised, even though only
  one tree node would match at the time. If you want to delete multiple nodes
  at once, use <a docgen-rel="seemfa" docgen-href="#delete_many/3" href="#delete_many-3"><code>delete_many/3</code></a>.</p>
 
  Example:
  <pre><code>%% Delete the tree node at `/:foo/:bar'.
ok = khepri_adv:delete(StoreId, [foo, bar]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#delete_many-3">delete_many/3</a>, <a href="khepri_adv.html#delete-3">khepri_adv:delete/3</a>.</p>

<h3 class="function"><a name="delete_many-1">delete_many/1</a></h3>
<div class="spec">
<p><code>delete_many(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes all tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>delete_many(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#delete_many-2">delete_many/2</a>, <a href="#delete_many-3">delete_many/3</a>.</p>

<h3 class="function"><a name="delete_many-2">delete_many/2</a></h3>
<div class="spec">
<p><code>delete_many(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p><p><code>delete_many(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Deletes all tree nodes matching the given path pattern.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>delete_many(StoreId, PathPattern)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, #{})</code>.</li>
  <li><code>delete_many(PathPattern, Options)</code>. Calling it is the same as calling
  <code>delete(StoreId, PathPattern, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#delete_many-3">delete_many/3</a>.</p>

<h3 class="function"><a name="delete_many-3">delete_many/3</a></h3>
<div class="spec">
<p><code>delete_many(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the nodes to delete.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Deletes all tree nodes matching the given path pattern.</p>
 
  <p>The <code>PathPattern</code> can be provided as a native path pattern (a list of tree
  node names and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  Example:
  <pre><code>%% Delete all nodes in the tree.
ok = khepri_adv:delete_many(StoreId, [?KHEPRI_WILDCARD_STAR]).</code></pre>
 </p>
<p><b>See also:</b> <a href="#delete-3">delete/3</a>.</p>

<h3 class="function"><a name="clear_payload-1">clear_payload/1</a></h3>
<div class="spec">
<p><code>clear_payload(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>clear_payload(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#clear_payload-2">clear_payload/2</a>, <a href="#clear_payload-3">clear_payload/3</a>.</p>

<h3 class="function"><a name="clear_payload-2">clear_payload/2</a></h3>
<div class="spec">
<p><code>clear_payload(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of the tree node pointed to by the given path  
pattern.</p>
 
  Calling this function is the same as calling <code>clear_payload(StoreId,
  PathPattern, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#clear_payload-3">clear_payload/3</a>.</p>

<h3 class="function"><a name="clear_payload-3">clear_payload/3</a></h3>
<div class="spec">
<p><code>clear_payload(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree node to modify.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Deletes the payload of the tree node pointed to by the given path  
pattern.</p>
 
  In other words, the payload is set to <a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>.
  Otherwise, the behavior is that of <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a>.
 </p>
<p><b>See also:</b> <a href="#put-4">put/4</a>, <a href="khepri_adv.html#clear_payload-3">khepri_adv:clear_payload/3</a>.</p>

<h3 class="function"><a name="clear_many_payloads-1">clear_many_payloads/1</a></h3>
<div class="spec">
<p><code>clear_many_payloads(PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of all tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>clear_many_payloads(StoreId,
  PathPattern)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#clear_many_payloads-2">clear_many_payloads/2</a>, <a href="#clear_many_payloads-3">clear_many_payloads/3</a>.</p>

<h3 class="function"><a name="clear_many_payloads-2">clear_many_payloads/2</a></h3>
<div class="spec">
<p><code>clear_many_payloads(StoreId, PathPattern) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Deletes the payload of all tree nodes matching the given path pattern.</p>
 
  Calling this function is the same as calling <code>clear_many_payloads(StoreId,
  PathPattern, #{})</code>.
 </p>
<p><b>See also:</b> <a href="#clear_many_payloads-3">clear_many_payloads/3</a>.</p>

<h3 class="function"><a name="clear_many_payloads-3">clear_many_payloads/3</a></h3>
<div class="spec">
<p><code>clear_many_payloads(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path (or path pattern) to the tree nodes to modify.<br>
<code>Options</code>: command options.
 <br>
</p>
<p>returns: in the case of a synchronous call, <code>ok</code> or an <code>{error, Reason}</code>
  tuple; in the case of an asynchronous call, always <code>ok</code> (the actual return
  value may be sent by a message if a correlation ID was specified).
 </p>
</div><p><p>Deletes the payload of all tree nodes matching the given path pattern.</p>
 
  In other words, the payload is set to <a docgen-rel="seetype" docgen-href="khepri_payload#no_payload/0" href="khepri_payload.html#type-no_payload"><code>khepri_payload:no_payload()</code></a>.
  Otherwise, the behavior is that of <a docgen-rel="seemfa" docgen-href="#put/4" href="#put-4"><code>put/4</code></a>.
 </p>
<p><b>See also:</b> <a href="#delete_many-3">delete_many/3</a>, <a href="#put-4">put/4</a>, <a href="khepri_adv.html#clear_many_payloads-3">khepri_adv:clear_many_payloads/3</a>.</p>

<h3 class="function"><a name="register_trigger-3">register_trigger/3</a></h3>
<div class="spec">
<p><code>register_trigger(TriggerId, EventFilter, StoredProcPath) -&gt; Ret</code>
<ul class="definitions"><li><code>TriggerId = <a href="#type-trigger_id">trigger_id()</a></code></li><li><code>EventFilter = <a href="/home/runner/work/khepri/khepri/doc/khepri_evf.html#type-event_filter">khepri_evf:event_filter()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>StoredProcPath = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-path">khepri_path:path()</a></code></li><li><code>Ret = ok | <a href="#type-error">error()</a></code></li></ul></p>
<p></p>
</div><p><p>Registers a trigger.</p>
 
  Calling this function is the same as calling <code>register_trigger(StoreId,
  TriggerId, EventFilter, StoredProcPath)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#register_trigger-4">register_trigger/4</a>.</p>

<h3 class="function"><a name="register_trigger-4">register_trigger/4</a></h3>
<div class="spec">
<p><code>register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>TriggerId = <a href="#type-trigger_id">trigger_id()</a></code></li><li><code>EventFilter = <a href="/home/runner/work/khepri/khepri/doc/khepri_evf.html#type-event_filter">khepri_evf:event_filter()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>StoredProcPath = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-path">khepri_path:path()</a></code></li><li><code>Ret = ok | <a href="#type-error">error()</a></code></li></ul></p><p><code>register_trigger(TriggerId, EventFilter, StoredProcPath, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>TriggerId = <a href="#type-trigger_id">trigger_id()</a></code></li><li><code>EventFilter = <a href="/home/runner/work/khepri/khepri/doc/khepri_evf.html#type-event_filter">khepri_evf:event_filter()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>StoredProcPath = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-path">khepri_path:path()</a></code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = ok | <a href="#type-error">error()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Registers a trigger.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath)</code>.
  Calling it is the same as calling <code>register_trigger(StoreId, TriggerId,
  EventFilter, StoredProcPath, #{})</code>.</li>
  <li><code>register_trigger(TriggerId, EventFilter, StoredProcPath, Options)</code>.
  Calling it is the same as calling <code>register_trigger(StoreId, TriggerId,
  EventFilter, StoredProcPath, Options)</code> with the default store ID (see
  <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#register_trigger-5">register_trigger/5</a>.</p>

<h3 class="function"><a name="register_trigger-5">register_trigger/5</a></h3>
<div class="spec">
<p><code>register_trigger(StoreId, TriggerId, EventFilter, StoredProcPath, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>TriggerId = <a href="#type-trigger_id">trigger_id()</a></code></li><li><code>EventFilter = <a href="/home/runner/work/khepri/khepri/doc/khepri_evf.html#type-event_filter">khepri_evf:event_filter()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>StoredProcPath = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-path">khepri_path:path()</a></code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = ok | <a href="#type-error">error()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>TriggerId</code>: the name of the trigger.<br>
<code>EventFilter</code>: the event filter used to associate an event with a
         stored procedure.<br>
<code>StoredProcPath</code>: the path to the stored procedure to execute when the
         corresponding event occurs.
 <br>
</p>
<p>returns: <code>ok</code> if the trigger was registered, an <code>{error, Reason}</code> tuple
  otherwise.</p>
</div><p><p>Registers a trigger.</p>
 
  <p>A trigger is based on an event filter. It associates an event with a stored  
procedure. When an event matching the event filter is emitted, the stored  
procedure is executed.</p>
 
  <p>The following event filters are documented by <a docgen-rel="seetype" docgen-href="khepri_evf#event_filter/0" href="khepri_evf.html#type-event_filter"><code>khepri_evf:event_filter()</code></a>.</p>
 
  <p>Here are examples of event filters:</p>
 
  <pre><code>%% An event filter can be explicitly created using the `khepri_evf'
%% module. This is possible to specify properties at the same time.
EventFilter = khepri_evf:tree([stock, wood, &lt;&lt;"oak"&gt;&gt;], %% Required
                              #{on_actions =&gt; [delete], %% Optional
                                priority =&gt; 10}).       %% Optional</code></pre>
  <pre><code>%% For ease of use, some terms can be automatically converted to an event
%% filter. In this example, a Unix-like path can be used as a tree event
%% filter.
EventFilter = "/:stock/:wood/oak".</code></pre>
 
  <p>The stored procedure is expected to accept a single argument. This argument  
is a map containing the event properties. Here is an example:</p>
 
  <pre><code>my_stored_procedure(Props) -&gt;
    #{path := Path},
      on_action =&gt; Action} = Props.</code></pre>
 
  <p>The stored procedure is executed on the leader's Erlang node.</p>
 
  It is guaranteed to run at least once. It could be executed multiple times
  if the Ra leader changes, therefore the stored procedure must be
  idempotent.
 </p>

<h3 class="function"><a name="register_projection-2">register_projection/2</a></h3>
<div class="spec">
<p><code>register_projection(PathPattern, Projection) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Projection = <a href="/home/runner/work/khepri/khepri/doc/khepri_projection.html#type-projection">khepri_projection:projection()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
</div><p><p>Registers a projection.</p>
 
  Calling this function is the same as calling
  <code>register_projection(StoreId, PathPattern, Projection)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#register_projection-3">register_projection/3</a>.</p>

<h3 class="function"><a name="register_projection-3">register_projection/3</a></h3>
<div class="spec">
<p><code>register_projection(StoreId, PathPattern, Projection) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Projection = <a href="/home/runner/work/khepri/khepri/doc/khepri_projection.html#type-projection">khepri_projection:projection()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p><p><code>register_projection(PathPattern, Projection, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Projection = <a href="/home/runner/work/khepri/khepri/doc/khepri_projection.html#type-projection">khepri_projection:projection()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p></p>
<p></p>
</div><p><p>Registers a projection.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>register_projection(StoreId, PathPattern, Projection)</code>. Calling it is
  the same as calling <code>register_projection(StoreId, PathPattern, Projection,
  #{})</code>.</li>
  <li><code>register_projection(PathPattern, Projection, Options)</code>. Calling it is
  the same as calling <code>register_projection(StoreId, PathPattern, Projection,
  Options)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#register_projection-4">register_projection/4</a>.</p>

<h3 class="function"><a name="register_projection-4">register_projection/4</a></h3>
<div class="spec">
<p><code>register_projection(StoreId, PathPattern, Projection, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Projection = <a href="/home/runner/work/khepri/khepri/doc/khepri_projection.html#type-projection">khepri_projection:projection()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a></code></li><li><code>Ret = ok | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-error">khepri:error()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the pattern of tree nodes which the projection should
         watch.<br>
<code>Projection</code>: the projection resource, created with
         <code>khepri_projection:new/3</code>.<br>
<code>Options</code>: command options for registering the projection.<br>
</p>
<p>returns: <code>ok</code> if the projection was registered, an <code>{error, Reason}</code> tuple
  otherwise.</p>
</div><p><p>Registers a projection.</p>
 
  <p>A projection is a replicated ETS cache which is kept up to date by
  Khepri. See the <a docgen-rel="seeerl" docgen-href="khepri_projection" href="khepri_projection.html"><code>khepri_projection</code></a> module-docs for more information  
about projections.</p>
 
  <p>This function associates a projection created with <a docgen-rel="seemfa" docgen-href="khepri_projection#new/3" href="khepri_projection.html#new-3"><code>khepri_projection:new/3</code></a> with a pattern. Any changes to tree nodes matching
  the provided pattern will be turned into records using the projection's
  <a docgen-rel="seetype" docgen-href="khepri_projection#projection_fun/0" href="khepri_projection.html#type-projection_fun"><code>khepri_projection:projection_fun()</code></a> and then applied to the  
projection's ETS table.</p>
 
  Registering a projection fills the projection's ETS table with records from
  any tree nodes which match the <code>PathPattern</code> and are already in the store.
 </p>

<h3 class="function"><a name="transaction-1">transaction/1</a></h3>
<div class="spec">
<p><code>transaction(FunOrPath) -&gt; Ret</code>
<ul class="definitions"><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Runs a transaction and returns its result.</p>
 
  Calling this function is the same as calling <code>transaction(FunOrPath, [])</code>
  with the default store ID.
 </p>
<p><b>See also:</b> <a href="#transaction-2">transaction/2</a>.</p>

<h3 class="function"><a name="transaction-2">transaction/2</a></h3>
<div class="spec">
<p><code>transaction(StoreId, FunOrPath) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a></code></li></ul></p><p><code>transaction(FunOrPath, Args) -&gt; Ret</code>
<ul class="definitions"><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a></code></li></ul></p><p><code>transaction(FunOrPath, ReadWriteOrOptions) -&gt; Ret</code>
<ul class="definitions"><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>ReadWriteOrOptions = ReadWrite | Options</code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="#type-query_options">query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
<p></p>
<p></p>
</div><p><p>Runs a transaction and returns its result.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>transaction(StoreId, FunOrPath)</code>. Calling it is the same as calling
  <code>transaction(StoreId, FunOrPath, [])</code>.</li>
  <li><code>transaction(FunOrPath, Args)</code>. Calling it is the same as calling
  <code>transaction(StoreId, FunOrPath, Args)</code> with the default store ID.</li>
  <li><code>transaction(FunOrPath, ReadWriteOrOptions)</code>. Calling it is the same as
  calling <code>transaction(StoreId, FunOrPath, [], ReadWriteOrOptions)</code> with the
  default store ID.</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#transaction-3">transaction/3</a>.</p>

<h3 class="function"><a name="transaction-3">transaction/3</a></h3>
<div class="spec">
<p><code>transaction(StoreId, FunOrPath, Args) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a></code></li></ul></p><p><code>transaction(StoreId, FunOrPath, ReadWriteOrOptions) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>ReadWriteOrOptions = ReadWrite | Options</code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="#type-query_options">query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p><p><code>transaction(FunOrPath, Args, ReadWriteOrOptions) -&gt; Ret</code>
<ul class="definitions"><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>ReadWriteOrOptions = ReadWrite | Options</code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="#type-query_options">query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p><p><code>transaction(FunOrPath, ReadWrite, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="#type-query_options">query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
<p></p>
<p></p>
<p></p>
</div><p><p>Runs a transaction and returns its result.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>transaction(StoreId, FunOrPath, Args)</code>. Calling it is the same as
  calling <code>transaction(StoreId, FunOrPath, Args, auto)</code>.</li>
  <li><code>transaction(StoreId, FunOrPath, ReadWriteOrOptions)</code>. Calling it is
  the same as calling <code>transaction(StoreId, FunOrPath, [],
  ReadWriteOrOptions)</code>.</li>
  <li><code>transaction(FunOrPath, Args, ReadWriteOrOptions)</code>. Calling it is the
  same as calling <code>transaction(StoreId, FunOrPath, Args, ReadWriteOrOptions)</code>
  with the default store ID.</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#transaction-4">transaction/4</a>.</p>

<h3 class="function"><a name="transaction-4">transaction/4</a></h3>
<div class="spec">
<p><code>transaction(StoreId, FunOrPath, Args, ReadWrite) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a></code></li></ul></p><p><code>transaction(StoreId, FunOrPath, Args, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="#type-query_options">query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p><p><code>transaction(StoreId, FunOrPath, ReadWrite, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="#type-query_options">query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p><p><code>transaction(FunOrPath, Args, ReadWrite, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="#type-query_options">query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
<p></p>
<p></p>
<p></p>
</div><p><p>Runs a transaction and returns its result.</p>
 
  This function accepts the following three forms:
  <ul>
  <li><code>transaction(StoreId, FunOrPath, Args, ReadWrite)</code>. Calling it is the
  same as calling <code>transaction(StoreId, FunOrPath, Args, ReadWrite,
  #{})</code>.</li>
  <li><code>transaction(StoreId, FunOrPath, Args, Options)</code>. Calling it is the
  same as calling <code>transaction(StoreId, FunOrPath, Args, auto,
  Options)</code>.</li>
  <li><code>transaction(FunOrPath, Args, ReadWrite, Options)</code>. Calling it is the
  same as calling <code>transaction(StoreId, FunOrPath, Args, ReadWrite, Options)</code>
  with the default store ID.</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#transaction-5">transaction/5</a>.</p>

<h3 class="function"><a name="transaction-5">transaction/5</a></h3>
<div class="spec">
<p><code>transaction(StoreId, FunOrPath, Args, ReadWrite, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>FunOrPath = Fun | PathPattern</code></li><li><code>Fun = <a href="/home/runner/work/khepri/khepri/doc/khepri_tx.html#type-tx_fun">khepri_tx:tx_fun()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Args = list()</code></li><li><code>ReadWrite = ro | rw | auto</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>FunOrPath</code>: an arbitrary anonymous function or a path pattern pointing
         to a stored procedure.<br>
<code>Args</code>: a list of arguments to pass to <code>FunOrPath</code>.<br>
<code>ReadWrite</code>: the read/write or read-only nature of the transaction.<br>
<code>Options</code>: command options such as the command type.
 <br>
</p>
<p>returns: in the case of a synchronous transaction, <code>{ok, Result}</code> where
  <code>Result</code> is the return value of <code>FunOrPath</code>, or <code>{error, Reason}</code> if the
  anonymous function was aborted; in the case of an asynchronous transaction,
  always <code>ok</code> (the actual return value may be sent by a message if a
  correlation ID was specified).</p>
</div><p><p>Runs a transaction and returns its result.</p>
 
  <p><code>Fun</code> is an arbitrary anonymous function which takes the content of <code>Args</code>
  as its arguments. In other words, the length of <code>Args</code> must correspond to
  the arity of <code>Fun</code>.</p>
 
  <p>Instead of <code>Fun</code>, <code>PathPattern` can be passed. It must point to an existing
  stored procedure. The length to `Args</code> must correspond to the arity of that  
stored procedure.</p>
 
  <p>The <code>ReadWrite</code> flag determines what the <code>Fun</code> anonymous function is  
allowed to do and in which context it runs:</p>
 
  <ul>
  <li>If <code>ReadWrite</code> is <code>ro</code>, <code>Fun</code> can do whatever it wants, except modify
  the content of the store. In other words, uses of <a docgen-rel="seemfa" docgen-href="khepri_tx#put/2" href="khepri_tx.html#put-2"><code>khepri_tx:put/2</code></a>
  or <a docgen-rel="seemfa" docgen-href="khepri_tx#delete/1" href="khepri_tx.html#delete-1"><code>khepri_tx:delete/1</code></a> are forbidden and will abort the function.
  <code>Fun</code> is executed from a process on the leader Ra member.</li>
  <li>If <code>ReadWrite</code> is <code>rw</code>, <code>Fun</code> can use the <a docgen-rel="seeerl" docgen-href="khepri_tx" href="khepri_tx.html"><code>khepri_tx</code></a> transaction
  API as well as any calls to other modules as long as those functions or what
  they do is permitted. See <a docgen-rel="seeerl" docgen-href="khepri_tx" href="khepri_tx.html"><code>khepri_tx</code></a> for more details. If <code>Fun</code> does
  or calls something forbidden, the transaction will be aborted. <code>Fun</code> is
  executed in the context of the state machine process on each Ra
  members.</li>
  <li>If <code>ReadWrite</code> is <code>auto</code>, <code>Fun</code> is analyzed to determine if it calls
  <a docgen-rel="seemfa" docgen-href="khepri_tx#put/2" href="khepri_tx.html#put-2"><code>khepri_tx:put/2</code></a> or <a docgen-rel="seemfa" docgen-href="khepri_tx#delete/1" href="khepri_tx.html#delete-1"><code>khepri_tx:delete/1</code></a>, or uses any denied
  operations for a read/write transaction. If it does, this is the same as
  setting <code>ReadWrite</code> to true. Otherwise, this is the equivalent of setting
  <code>ReadWrite</code> to false.</li>
  </ul>
 
  <p>When using <code>PathPattern</code>, a <code>ReadWrite</code> of <code>auto</code> is synonymous of <code>rw</code>.</p>
 
  <p><code>Options</code> is relevant for both read-only and read-write transactions  
(including audetected ones). However note that both types expect different  
options.</p>
 
  The result of <code>FunOrPath</code> can be any term. That result is returned in an
  <code>{ok, Result}</code> tuple if the transaction is synchronous. The result is sent
  by message if the transaction is asynchronous and a correlation ID was
  specified.
 </p>

<h3 class="function"><a name="wait_for_async_ret-1">wait_for_async_ret/1</a></h3>
<div class="spec">
<p><code>wait_for_async_ret(Correlation) -&gt; Ret</code>
<ul class="definitions"><li><code>Correlation = <a href="/home/runner/work/khepri/ra/doc/ra_server.html#type-command_correlation">ra_server:command_correlation()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Waits for an asynchronous call.</p>
 
  Calling this function is the same as calling
  <code>wait_for_async_ret(Correlation)</code> with the default timeout (see <a docgen-rel="seemfa" docgen-href="khepri_app#get_default_timeout/0" href="khepri_app.html#get_default_timeout-0"><code>khepri_app:get_default_timeout/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#wait_for_async_ret-2">wait_for_async_ret/2</a>.</p>

<h3 class="function"><a name="wait_for_async_ret-2">wait_for_async_ret/2</a></h3>
<div class="spec">
<p><code>wait_for_async_ret(Correlation, Timeout) -&gt; Ret</code>
<ul class="definitions"><li><code>Correlation = <a href="/home/runner/work/khepri/ra/doc/ra_server.html#type-command_correlation">ra_server:command_correlation()</a></code></li><li><code>Timeout = timeout()</code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-minimal_ret">khepri:minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-payload_ret">khepri:payload_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-many_payloads_ret">khepri:many_payloads_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-single_result">khepri_adv:single_result()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_adv.html#type-many_results">khepri_adv:many_results()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-tx_ret">khepri_machine:tx_ret()</a></code></li></ul></p>
<p></p>
</div><p><p>Waits for an asynchronous call.</p>
 
  This function waits maximum <code>Timeout</code> milliseconds (or <code>infinity</code>) for the
  result of a previous call where the <code>async</code> option was set with a
  correlation ID. That correlation ID must be passed to this function.
 </p>
<p><b>See also:</b> <a href="#wait_for_async_ret-2">wait_for_async_ret/2</a>.</p>

<h3 class="function"><a name="get%21-1">'get!'/1</a></h3>
<div class="spec">
<p><code>'get!'(PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="get%21-2">'get!'/2</a></h3>
<div class="spec">
<p><code>'get!'(StoreId, PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p><p><code>'get!'(PathPattern, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="get%21-3">'get!'/3</a></h3>
<div class="spec">
<p><code>'get!'(StoreId, PathPattern, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="get_or%21-2">'get_or!'/2</a></h3>
<div class="spec">
<p><code>'get_or!'(PathPattern, Default) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="get_or%21-3">'get_or!'/3</a></h3>
<div class="spec">
<p><code>'get_or!'(StoreId, PathPattern, Default) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p><p><code>'get_or!'(PathPattern, Default, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="get_or%21-4">'get_or!'/4</a></h3>
<div class="spec">
<p><code>'get_or!'(StoreId, PathPattern, Default, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="get_many%21-1">'get_many!'/1</a></h3>
<div class="spec">
<p><code>'get_many!'(PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="get_many%21-2">'get_many!'/2</a></h3>
<div class="spec">
<p><code>'get_many!'(StoreId, PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p><p><code>'get_many!'(PathPattern, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="get_many%21-3">'get_many!'/3</a></h3>
<div class="spec">
<p><code>'get_many!'(StoreId, PathPattern, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="get_many_or%21-2">'get_many_or!'/2</a></h3>
<div class="spec">
<p><code>'get_many_or!'(PathPattern, Default) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="get_many_or%21-3">'get_many_or!'/3</a></h3>
<div class="spec">
<p><code>'get_many_or!'(StoreId, PathPattern, Default) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p><p><code>'get_many_or!'(PathPattern, Default, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="get_many_or%21-4">'get_many_or!'/4</a></h3>
<div class="spec">
<p><code>'get_many_or!'(StoreId, PathPattern, Default, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Default = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-data">khepri:data()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_many_payloads_ret">khepri:unwrapped_many_payloads_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="exists%21-1">'exists!'/1</a></h3>
<div class="spec">
<p><code>'exists!'(PathPattern) -&gt; Exists</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Exists = boolean()</code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="exists%21-2">'exists!'/2</a></h3>
<div class="spec">
<p><code>'exists!'(StoreId, PathPattern) -&gt; Exists</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Exists = boolean()</code></li></ul></p><p><code>'exists!'(PathPattern, Options) -&gt; Exists</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Exists = boolean()</code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="exists%21-3">'exists!'/3</a></h3>
<div class="spec">
<p><code>'exists!'(StoreId, PathPattern, Options) -&gt; Exists</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Exists = boolean()</code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="has_data%21-1">'has_data!'/1</a></h3>
<div class="spec">
<p><code>'has_data!'(PathPattern) -&gt; HasData</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>HasData = boolean()</code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="has_data%21-2">'has_data!'/2</a></h3>
<div class="spec">
<p><code>'has_data!'(StoreId, PathPattern) -&gt; HasData</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>HasData = boolean()</code></li></ul></p><p><code>'has_data!'(PathPattern, Options) -&gt; HasData</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>HasData = boolean()</code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="has_data%21-3">'has_data!'/3</a></h3>
<div class="spec">
<p><code>'has_data!'(StoreId, PathPattern, Options) -&gt; HasData</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>HasData = boolean()</code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="is_sproc%21-1">'is_sproc!'/1</a></h3>
<div class="spec">
<p><code>'is_sproc!'(PathPattern) -&gt; IsSproc</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>IsSproc = boolean()</code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="is_sproc%21-2">'is_sproc!'/2</a></h3>
<div class="spec">
<p><code>'is_sproc!'(StoreId, PathPattern) -&gt; IsSproc</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>IsSproc = boolean()</code></li></ul></p><p><code>'is_sproc!'(PathPattern, Options) -&gt; IsSproc</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>IsSproc = boolean()</code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="is_sproc%21-3">'is_sproc!'/3</a></h3>
<div class="spec">
<p><code>'is_sproc!'(StoreId, PathPattern, Options) -&gt; IsSproc</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>IsSproc = boolean()</code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="count%21-1">'count!'/1</a></h3>
<div class="spec">
<p><code>'count!'(PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="count%21-2">'count!'/2</a></h3>
<div class="spec">
<p><code>'count!'(StoreId, PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p><p><code>'count!'(PathPattern, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="count%21-3">'count!'/3</a></h3>
<div class="spec">
<p><code>'count!'(StoreId, PathPattern, Options) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-query_options">query_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_payload_ret">khepri:unwrapped_payload_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="put%21-2">'put!'/2</a></h3>
<div class="spec">
<p><code>'put!'(PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="put%21-3">'put!'/3</a></h3>
<div class="spec">
<p><code>'put!'(StoreId, PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="put%21-4">'put!'/4</a></h3>
<div class="spec">
<p><code>'put!'(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="put_many%21-2">'put_many!'/2</a></h3>
<div class="spec">
<p><code>'put_many!'(PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="put_many%21-3">'put_many!'/3</a></h3>
<div class="spec">
<p><code>'put_many!'(StoreId, PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="put_many%21-4">'put_many!'/4</a></h3>
<div class="spec">
<p><code>'put_many!'(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="create%21-2">'create!'/2</a></h3>
<div class="spec">
<p><code>'create!'(PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="create%21-3">'create!'/3</a></h3>
<div class="spec">
<p><code>'create!'(StoreId, PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="create%21-4">'create!'/4</a></h3>
<div class="spec">
<p><code>'create!'(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="update%21-2">'update!'/2</a></h3>
<div class="spec">
<p><code>'update!'(PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="update%21-3">'update!'/3</a></h3>
<div class="spec">
<p><code>'update!'(StoreId, PathPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="update%21-4">'update!'/4</a></h3>
<div class="spec">
<p><code>'update!'(StoreId, PathPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="compare_and_swap%21-3">'compare_and_swap!'/3</a></h3>
<div class="spec">
<p><code>'compare_and_swap!'(PathPattern, DataPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="compare_and_swap%21-4">'compare_and_swap!'/4</a></h3>
<div class="spec">
<p><code>'compare_and_swap!'(StoreId, PathPattern, DataPattern, Data) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="compare_and_swap%21-5">'compare_and_swap!'/5</a></h3>
<div class="spec">
<p><code>'compare_and_swap!'(StoreId, PathPattern, DataPattern, Data, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>DataPattern = <a href="/home/runner/work/khepri/stdlib/doc/ets.html#type-match_pattern">ets:match_pattern()</a></code></li><li><code>Data = <a href="/home/runner/work/khepri/khepri/doc/khepri_payload.html#type-payload">khepri_payload:payload()</a> | <a href="#type-data">data()</a> | function()</code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="delete%21-1">'delete!'/1</a></h3>
<div class="spec">
<p><code>'delete!'(PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="delete%21-2">'delete!'/2</a></h3>
<div class="spec">
<p><code>'delete!'(StoreId, PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p><p><code>'delete!'(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="delete%21-3">'delete!'/3</a></h3>
<div class="spec">
<p><code>'delete!'(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="delete_many%21-1">'delete_many!'/1</a></h3>
<div class="spec">
<p><code>'delete_many!'(PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="delete_many%21-2">'delete_many!'/2</a></h3>
<div class="spec">
<p><code>'delete_many!'(StoreId, PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p><p><code>'delete_many!'(PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
<p></p>
</div>

<h3 class="function"><a name="delete_many%21-3">'delete_many!'/3</a></h3>
<div class="spec">
<p><code>'delete_many!'(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="#type-command_options">command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="clear_payload%21-1">'clear_payload!'/1</a></h3>
<div class="spec">
<p><code>'clear_payload!'(PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="clear_payload%21-2">'clear_payload!'/2</a></h3>
<div class="spec">
<p><code>'clear_payload!'(StoreId, PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="clear_payload%21-3">'clear_payload!'/3</a></h3>
<div class="spec">
<p><code>'clear_payload!'(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="clear_many_payloads%21-1">'clear_many_payloads!'/1</a></h3>
<div class="spec">
<p><code>'clear_many_payloads!'(PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="clear_many_payloads%21-2">'clear_many_payloads!'/2</a></h3>
<div class="spec">
<p><code>'clear_many_payloads!'(StoreId, PathPattern) -&gt; Payload</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Payload = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="clear_many_payloads%21-3">'clear_many_payloads!'/3</a></h3>
<div class="spec">
<p><code>'clear_many_payloads!'(StoreId, PathPattern, Options) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-command_options">khepri:command_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-tree_options">khepri:tree_options()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-put_options">khepri:put_options()</a></code></li><li><code>Ret = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-unwrapped_minimal_ret">khepri:unwrapped_minimal_ret()</a> | <a href="/home/runner/work/khepri/khepri/doc/khepri_machine.html#type-async_ret">khepri_machine:async_ret()</a></code></li></ul></p>
<p></p>
</div>

<h3 class="function"><a name="export-2">export/2</a></h3>
<div class="spec">
<p><code>export(Module, ModulePriv) -&gt; Ret</code>
<ul class="definitions"><li><code>Module = module()</code></li><li><code>ModulePriv = <a href="/home/runner/work/khepri/khepri/doc/khepri_import_export.html#type-module_priv">khepri_import_export:module_priv()</a></code></li><li><code>Ret = ok | {ok, ModulePriv} | {error, any()}</code></li></ul></p>
<p></p>
</div><p><p>Exports a Khepri store using the <code>Module</code> callback module.</p>
 
  Calling this function is the same as calling <code>export(StoreId, Module,
  ModulePriv)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#export-3">export/3</a>, <a href="#export-4">export/4</a>.</p>

<h3 class="function"><a name="export-3">export/3</a></h3>
<div class="spec">
<p><code>export(StoreId::StoreId | PathPattern, Module, ModulePriv) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Module = module()</code></li><li><code>ModulePriv = <a href="/home/runner/work/khepri/khepri/doc/khepri_import_export.html#type-module_priv">khepri_import_export:module_priv()</a></code></li><li><code>Ret = ok | {ok, ModulePriv} | {error, any()}</code></li></ul></p>
<p></p>
</div><p><p>Exports a Khepri store using the <code>Module</code> callback module.</p>
 
  This function accepts the following two forms:
  <ul>
  <li><code>export(StoreId, Module, ModulePriv)</code>. Calling it is the same as
  calling <code>export(StoreId, "**", Module, ModulePriv)</code>.</li>
  <li><code>export(PathPattern, Module, ModulePriv)</code>. Calling it is the same as
  calling <code>export(StoreId, PathPattern, Module, ModulePriv)</code> with the default
  store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).</li>
  </ul>
 </p>
<p><b>See also:</b> <a href="#export-4">export/4</a>.</p>

<h3 class="function"><a name="export-4">export/4</a></h3>
<div class="spec">
<p><code>export(StoreId, PathPattern, Module, ModulePriv) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>PathPattern = <a href="/home/runner/work/khepri/khepri/doc/khepri_path.html#type-pattern">khepri_path:pattern()</a></code></li><li><code>Module = module()</code></li><li><code>ModulePriv = <a href="/home/runner/work/khepri/khepri/doc/khepri_import_export.html#type-module_priv">khepri_import_export:module_priv()</a></code></li><li><code>Ret = ok | {ok, ModulePriv} | {error, any()}</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>PathPattern</code>: the path pattern matching the tree nodes to export.<br>
<code>Module</code>: the callback module to use to export.<br>
<code>ModulePriv</code>: arguments passed to <code>Module:open_write/1</code>.
 <br>
</p>
<p>returns: <code>ok</code> or an <code>{ok, Term}</code> tuple if the export succeeded (the actual
  return value depends on whether the callback module wants to return anything
  to the caller), or an <code>{error, Reason}</code> tuple if it failed.
 </p>
</div><p><p>Exports a Khepri store using the <code>Module</code> callback module.</p>
 
  <p>The <code>PathPattern</code> allows to filter which tree nodes are exported. The path
  pattern can be provided as a native path pattern (a list of tree node names
  and conditions) or as a string. See <a docgen-rel="seemfa" docgen-href="khepri_path#from_string/1" href="khepri_path.html#from_string-1"><code>khepri_path:from_string/1</code></a>.</p>
 
  <p><code>Module</code> is the callback module called to perform the actual export. It
  must conform to the Mnesia Backup &amp; Restore API. See <a docgen-rel="seeerl" docgen-href="khepri_import_export" href="khepri_import_export.html"><code>khepri_import_export</code></a> for more details.</p>
 
  <p><code>ModulePriv</code> is the term passed to <code>Module:open_write/1</code>.</p>
 
  Example: export the full Khepri store using <a docgen-rel="seeerl" docgen-href="khepri_export_erlang" href="khepri_export_erlang.html"><code>khepri_export_erlang</code></a> as
  the callback module
  <pre><code>ok = khepri:export(StoreId, khepri_export_erlang, "export-1.erl").</code></pre>
 
  Example: export a subset of the Khepri store
  <pre><code>ok = khepri:export(
       StoreId,
       "/:stock/:wood/**",
       khepri_export_erlang,
       "export-wood-stock-1.erl").</code></pre>
 </p>
<p><b>See also:</b> <a href="#import-3">import/3</a>.</p>

<h3 class="function"><a name="import-2">import/2</a></h3>
<div class="spec">
<p><code>import(Module, ModulePriv) -&gt; Ret</code>
<ul class="definitions"><li><code>Module = module()</code></li><li><code>ModulePriv = <a href="/home/runner/work/khepri/khepri/doc/khepri_import_export.html#type-module_priv">khepri_import_export:module_priv()</a></code></li><li><code>Ret = ok | {ok, ModulePriv} | {error, any()}</code></li></ul></p>
<p></p>
</div><p><p>Imports a previously exported set of tree nodes using the <code>Module</code>  
callback module.</p>
 
  Calling this function is the same as calling <code>import(StoreId, Module,
  ModulePriv)</code> with the default store ID (see <a docgen-rel="seemfa" docgen-href="khepri_cluster#get_default_store_id/0" href="khepri_cluster.html#get_default_store_id-0"><code>khepri_cluster:get_default_store_id/0</code></a>).
 </p>
<p><b>See also:</b> <a href="#import-3">import/3</a>.</p>

<h3 class="function"><a name="import-3">import/3</a></h3>
<div class="spec">
<p><code>import(StoreId, Module, ModulePriv) -&gt; Ret</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>Module = module()</code></li><li><code>ModulePriv = <a href="/home/runner/work/khepri/khepri/doc/khepri_import_export.html#type-module_priv">khepri_import_export:module_priv()</a></code></li><li><code>Ret = ok | {ok, ModulePriv} | {error, any()}</code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>Module</code>: the callback module to use to import.<br>
<code>ModulePriv</code>: arguments passed to <code>Module:open_read/1</code>.
 <br>
</p>
<p>returns: <code>ok</code> or an <code>{ok, Term}</code> tuple if the import succeeded (the actual
  return value depends on whether the callback module wants to return anything
  to the caller), or an <code>{error, Reason}</code> tuple if it failed.
 </p>
</div><p><p>Imports a previously exported set of tree nodes using the <code>Module</code>  
callback module.</p>
 
  <p><code>Module</code> is the callback module called to perform the actual import. It
  must conform to the Mnesia Backup &amp; Restore API. See <a docgen-rel="seeerl" docgen-href="khepri_import_export" href="khepri_import_export.html"><code>khepri_import_export</code></a> for more details.</p>
 
  <p><code>ModulePriv</code> is the term passed to <code>Module:open_read/1</code>.</p>
 
  <p>Importing something doesn't delete existing tree nodes. The caller is  
responsible for deleting the existing content of a store if he needs to.</p>
 
  Example: import a set of tree nodes using <a docgen-rel="seeerl" docgen-href="khepri_export_erlang" href="khepri_export_erlang.html"><code>khepri_export_erlang</code></a> as
  the callback module
  <pre><code>ok = khepri:import(StoreId, khepri_export_erlang, "export-1.erl").</code></pre>
 </p>
<p><b>See also:</b> <a href="#export-3">export/3</a>.</p>

<h3 class="function"><a name="info-0">info/0</a></h3>
<div class="spec">
<p><code>info() -&gt; ok</code><br></p>
<p></p>
</div><p>Lists the running stores on <em>stdout</em>.</p>

<h3 class="function"><a name="info-1">info/1</a></h3>
<div class="spec">
<p><code>info(StoreId) -&gt; ok</code>
<ul class="definitions"><li><code>StoreId = <a href="#type-store_id">store_id()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
</p>
</div><p>Lists the content of specified store on <em>stdout</em>.
 </p>

<h3 class="function"><a name="info-2">info/2</a></h3>
<div class="spec">
<p><code>info(StoreId, Options) -&gt; ok</code>
<ul class="definitions"><li><code>StoreId = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-store_id">khepri:store_id()</a></code></li><li><code>Options = <a href="/home/runner/work/khepri/khepri/doc/khepri.html#type-query_options">khepri:query_options()</a></code></li></ul></p>
<p><code>StoreId</code>: the name of the Khepri store.<br>
<code>Options</code>: query options.<br>
</p>
</div><p>Lists the content of specified store on <em>stdout</em>.
 </p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc</i></p>
</body>
</html>
